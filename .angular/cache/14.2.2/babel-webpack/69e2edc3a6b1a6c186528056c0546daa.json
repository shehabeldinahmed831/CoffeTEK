{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"D:/WebDev/dfproject/gp/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\n\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\n\nvar __export = (target, all) => {\n  for (var name in all) __defProp(target, name, {\n    get: all[name],\n    enumerable: true\n  });\n};\n\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from)) if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {\n      get: () => from[key],\n      enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n    });\n  }\n\n  return to;\n};\n\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", {\n  value: mod,\n  enumerable: true\n}) : target, mod));\n\nvar __toCommonJS = mod => __copyProps(__defProp({}, \"__esModule\", {\n  value: true\n}), mod); // lib/npm/node.ts\n\n\nvar node_exports = {};\n\n__export(node_exports, {\n  analyzeMetafile: () => analyzeMetafile,\n  analyzeMetafileSync: () => analyzeMetafileSync,\n  build: () => build,\n  buildSync: () => buildSync,\n  default: () => node_default,\n  formatMessages: () => formatMessages,\n  formatMessagesSync: () => formatMessagesSync,\n  initialize: () => initialize,\n  serve: () => serve,\n  transform: () => transform,\n  transformSync: () => transformSync,\n  version: () => version\n});\n\nmodule.exports = __toCommonJS(node_exports); // lib/shared/stdio_protocol.ts\n\nfunction encodePacket(packet) {\n  let visit = value => {\n    if (value === null) {\n      bb.write8(0);\n    } else if (typeof value === \"boolean\") {\n      bb.write8(1);\n      bb.write8(+value);\n    } else if (typeof value === \"number\") {\n      bb.write8(2);\n      bb.write32(value | 0);\n    } else if (typeof value === \"string\") {\n      bb.write8(3);\n      bb.write(encodeUTF8(value));\n    } else if (value instanceof Uint8Array) {\n      bb.write8(4);\n      bb.write(value);\n    } else if (value instanceof Array) {\n      bb.write8(5);\n      bb.write32(value.length);\n\n      for (let item of value) {\n        visit(item);\n      }\n    } else {\n      let keys = Object.keys(value);\n      bb.write8(6);\n      bb.write32(keys.length);\n\n      for (let key of keys) {\n        bb.write(encodeUTF8(key));\n        visit(value[key]);\n      }\n    }\n  };\n\n  let bb = new ByteBuffer();\n  bb.write32(0);\n  bb.write32(packet.id << 1 | +!packet.isRequest);\n  visit(packet.value);\n  writeUInt32LE(bb.buf, bb.len - 4, 0);\n  return bb.buf.subarray(0, bb.len);\n}\n\nfunction decodePacket(bytes) {\n  let visit = () => {\n    switch (bb.read8()) {\n      case 0:\n        return null;\n\n      case 1:\n        return !!bb.read8();\n\n      case 2:\n        return bb.read32();\n\n      case 3:\n        return decodeUTF8(bb.read());\n\n      case 4:\n        return bb.read();\n\n      case 5:\n        {\n          let count = bb.read32();\n          let value2 = [];\n\n          for (let i = 0; i < count; i++) {\n            value2.push(visit());\n          }\n\n          return value2;\n        }\n\n      case 6:\n        {\n          let count = bb.read32();\n          let value2 = {};\n\n          for (let i = 0; i < count; i++) {\n            value2[decodeUTF8(bb.read())] = visit();\n          }\n\n          return value2;\n        }\n\n      default:\n        throw new Error(\"Invalid packet\");\n    }\n  };\n\n  let bb = new ByteBuffer(bytes);\n  let id = bb.read32();\n  let isRequest = (id & 1) === 0;\n  id >>>= 1;\n  let value = visit();\n\n  if (bb.ptr !== bytes.length) {\n    throw new Error(\"Invalid packet\");\n  }\n\n  return {\n    id,\n    isRequest,\n    value\n  };\n}\n\nvar ByteBuffer = class {\n  constructor(buf = new Uint8Array(1024)) {\n    this.buf = buf;\n    this.len = 0;\n    this.ptr = 0;\n  }\n\n  _write(delta) {\n    if (this.len + delta > this.buf.length) {\n      let clone = new Uint8Array((this.len + delta) * 2);\n      clone.set(this.buf);\n      this.buf = clone;\n    }\n\n    this.len += delta;\n    return this.len - delta;\n  }\n\n  write8(value) {\n    let offset = this._write(1);\n\n    this.buf[offset] = value;\n  }\n\n  write32(value) {\n    let offset = this._write(4);\n\n    writeUInt32LE(this.buf, value, offset);\n  }\n\n  write(bytes) {\n    let offset = this._write(4 + bytes.length);\n\n    writeUInt32LE(this.buf, bytes.length, offset);\n    this.buf.set(bytes, offset + 4);\n  }\n\n  _read(delta) {\n    if (this.ptr + delta > this.buf.length) {\n      throw new Error(\"Invalid packet\");\n    }\n\n    this.ptr += delta;\n    return this.ptr - delta;\n  }\n\n  read8() {\n    return this.buf[this._read(1)];\n  }\n\n  read32() {\n    return readUInt32LE(this.buf, this._read(4));\n  }\n\n  read() {\n    let length = this.read32();\n    let bytes = new Uint8Array(length);\n\n    let ptr = this._read(bytes.length);\n\n    bytes.set(this.buf.subarray(ptr, ptr + length));\n    return bytes;\n  }\n\n};\nvar encodeUTF8;\nvar decodeUTF8;\n\nif (typeof TextEncoder !== \"undefined\" && typeof TextDecoder !== \"undefined\") {\n  let encoder = new TextEncoder();\n  let decoder = new TextDecoder();\n\n  encodeUTF8 = text => encoder.encode(text);\n\n  decodeUTF8 = bytes => decoder.decode(bytes);\n} else if (typeof Buffer !== \"undefined\") {\n  encodeUTF8 = text => {\n    let buffer = Buffer.from(text);\n\n    if (!(buffer instanceof Uint8Array)) {\n      buffer = new Uint8Array(buffer);\n    }\n\n    return buffer;\n  };\n\n  decodeUTF8 = bytes => {\n    let {\n      buffer,\n      byteOffset,\n      byteLength\n    } = bytes;\n    return Buffer.from(buffer, byteOffset, byteLength).toString();\n  };\n} else {\n  throw new Error(\"No UTF-8 codec found\");\n}\n\nfunction readUInt32LE(buffer, offset) {\n  return buffer[offset++] | buffer[offset++] << 8 | buffer[offset++] << 16 | buffer[offset++] << 24;\n}\n\nfunction writeUInt32LE(buffer, value, offset) {\n  buffer[offset++] = value;\n  buffer[offset++] = value >> 8;\n  buffer[offset++] = value >> 16;\n  buffer[offset++] = value >> 24;\n} // lib/shared/common.ts\n\n\nfunction validateTarget(target) {\n  target += \"\";\n  if (target.indexOf(\",\") >= 0) throw new Error(`Invalid target: ${target}`);\n  return target;\n}\n\nvar canBeAnything = () => null;\n\nvar mustBeBoolean = value => typeof value === \"boolean\" ? null : \"a boolean\";\n\nvar mustBeBooleanOrObject = value => typeof value === \"boolean\" || typeof value === \"object\" && !Array.isArray(value) ? null : \"a boolean or an object\";\n\nvar mustBeString = value => typeof value === \"string\" ? null : \"a string\";\n\nvar mustBeRegExp = value => value instanceof RegExp ? null : \"a RegExp object\";\n\nvar mustBeInteger = value => typeof value === \"number\" && value === (value | 0) ? null : \"an integer\";\n\nvar mustBeFunction = value => typeof value === \"function\" ? null : \"a function\";\n\nvar mustBeArray = value => Array.isArray(value) ? null : \"an array\";\n\nvar mustBeObject = value => typeof value === \"object\" && value !== null && !Array.isArray(value) ? null : \"an object\";\n\nvar mustBeWebAssemblyModule = value => value instanceof WebAssembly.Module ? null : \"a WebAssembly.Module\";\n\nvar mustBeArrayOrRecord = value => typeof value === \"object\" && value !== null ? null : \"an array or an object\";\n\nvar mustBeObjectOrNull = value => typeof value === \"object\" && !Array.isArray(value) ? null : \"an object or null\";\n\nvar mustBeStringOrBoolean = value => typeof value === \"string\" || typeof value === \"boolean\" ? null : \"a string or a boolean\";\n\nvar mustBeStringOrObject = value => typeof value === \"string\" || typeof value === \"object\" && value !== null && !Array.isArray(value) ? null : \"a string or an object\";\n\nvar mustBeStringOrArray = value => typeof value === \"string\" || Array.isArray(value) ? null : \"a string or an array\";\n\nvar mustBeStringOrUint8Array = value => typeof value === \"string\" || value instanceof Uint8Array ? null : \"a string or a Uint8Array\";\n\nfunction getFlag(object, keys, key, mustBeFn) {\n  let value = object[key];\n  keys[key + \"\"] = true;\n  if (value === void 0) return void 0;\n  let mustBe = mustBeFn(value);\n  if (mustBe !== null) throw new Error(`\"${key}\" must be ${mustBe}`);\n  return value;\n}\n\nfunction checkForInvalidFlags(object, keys, where) {\n  for (let key in object) {\n    if (!(key in keys)) {\n      throw new Error(`Invalid option ${where}: \"${key}\"`);\n    }\n  }\n}\n\nfunction validateInitializeOptions(options) {\n  let keys = /* @__PURE__ */Object.create(null);\n  let wasmURL = getFlag(options, keys, \"wasmURL\", mustBeString);\n  let wasmModule = getFlag(options, keys, \"wasmModule\", mustBeWebAssemblyModule);\n  let worker = getFlag(options, keys, \"worker\", mustBeBoolean);\n  checkForInvalidFlags(options, keys, \"in initialize() call\");\n  return {\n    wasmURL,\n    wasmModule,\n    worker\n  };\n}\n\nfunction validateMangleCache(mangleCache) {\n  let validated;\n\n  if (mangleCache !== void 0) {\n    validated = /* @__PURE__ */Object.create(null);\n\n    for (let key of Object.keys(mangleCache)) {\n      let value = mangleCache[key];\n\n      if (typeof value === \"string\" || value === false) {\n        validated[key] = value;\n      } else {\n        throw new Error(`Expected ${JSON.stringify(key)} in mangle cache to map to either a string or false`);\n      }\n    }\n  }\n\n  return validated;\n}\n\nfunction pushLogFlags(flags, options, keys, isTTY2, logLevelDefault) {\n  let color = getFlag(options, keys, \"color\", mustBeBoolean);\n  let logLevel = getFlag(options, keys, \"logLevel\", mustBeString);\n  let logLimit = getFlag(options, keys, \"logLimit\", mustBeInteger);\n  if (color !== void 0) flags.push(`--color=${color}`);else if (isTTY2) flags.push(`--color=true`);\n  flags.push(`--log-level=${logLevel || logLevelDefault}`);\n  flags.push(`--log-limit=${logLimit || 0}`);\n}\n\nfunction pushCommonFlags(flags, options, keys) {\n  let legalComments = getFlag(options, keys, \"legalComments\", mustBeString);\n  let sourceRoot = getFlag(options, keys, \"sourceRoot\", mustBeString);\n  let sourcesContent = getFlag(options, keys, \"sourcesContent\", mustBeBoolean);\n  let target = getFlag(options, keys, \"target\", mustBeStringOrArray);\n  let format = getFlag(options, keys, \"format\", mustBeString);\n  let globalName = getFlag(options, keys, \"globalName\", mustBeString);\n  let mangleProps = getFlag(options, keys, \"mangleProps\", mustBeRegExp);\n  let reserveProps = getFlag(options, keys, \"reserveProps\", mustBeRegExp);\n  let mangleQuoted = getFlag(options, keys, \"mangleQuoted\", mustBeBoolean);\n  let minify = getFlag(options, keys, \"minify\", mustBeBoolean);\n  let minifySyntax = getFlag(options, keys, \"minifySyntax\", mustBeBoolean);\n  let minifyWhitespace = getFlag(options, keys, \"minifyWhitespace\", mustBeBoolean);\n  let minifyIdentifiers = getFlag(options, keys, \"minifyIdentifiers\", mustBeBoolean);\n  let drop = getFlag(options, keys, \"drop\", mustBeArray);\n  let charset = getFlag(options, keys, \"charset\", mustBeString);\n  let treeShaking = getFlag(options, keys, \"treeShaking\", mustBeBoolean);\n  let ignoreAnnotations = getFlag(options, keys, \"ignoreAnnotations\", mustBeBoolean);\n  let jsx = getFlag(options, keys, \"jsx\", mustBeString);\n  let jsxFactory = getFlag(options, keys, \"jsxFactory\", mustBeString);\n  let jsxFragment = getFlag(options, keys, \"jsxFragment\", mustBeString);\n  let jsxImportSource = getFlag(options, keys, \"jsxImportSource\", mustBeString);\n  let jsxDev = getFlag(options, keys, \"jsxDev\", mustBeBoolean);\n  let define = getFlag(options, keys, \"define\", mustBeObject);\n  let logOverride = getFlag(options, keys, \"logOverride\", mustBeObject);\n  let supported = getFlag(options, keys, \"supported\", mustBeObject);\n  let pure = getFlag(options, keys, \"pure\", mustBeArray);\n  let keepNames = getFlag(options, keys, \"keepNames\", mustBeBoolean);\n  let platform = getFlag(options, keys, \"platform\", mustBeString);\n  if (legalComments) flags.push(`--legal-comments=${legalComments}`);\n  if (sourceRoot !== void 0) flags.push(`--source-root=${sourceRoot}`);\n  if (sourcesContent !== void 0) flags.push(`--sources-content=${sourcesContent}`);\n\n  if (target) {\n    if (Array.isArray(target)) flags.push(`--target=${Array.from(target).map(validateTarget).join(\",\")}`);else flags.push(`--target=${validateTarget(target)}`);\n  }\n\n  if (format) flags.push(`--format=${format}`);\n  if (globalName) flags.push(`--global-name=${globalName}`);\n  if (platform) flags.push(`--platform=${platform}`);\n  if (minify) flags.push(\"--minify\");\n  if (minifySyntax) flags.push(\"--minify-syntax\");\n  if (minifyWhitespace) flags.push(\"--minify-whitespace\");\n  if (minifyIdentifiers) flags.push(\"--minify-identifiers\");\n  if (charset) flags.push(`--charset=${charset}`);\n  if (treeShaking !== void 0) flags.push(`--tree-shaking=${treeShaking}`);\n  if (ignoreAnnotations) flags.push(`--ignore-annotations`);\n  if (drop) for (let what of drop) flags.push(`--drop:${what}`);\n  if (mangleProps) flags.push(`--mangle-props=${mangleProps.source}`);\n  if (reserveProps) flags.push(`--reserve-props=${reserveProps.source}`);\n  if (mangleQuoted !== void 0) flags.push(`--mangle-quoted=${mangleQuoted}`);\n  if (jsx) flags.push(`--jsx=${jsx}`);\n  if (jsxFactory) flags.push(`--jsx-factory=${jsxFactory}`);\n  if (jsxFragment) flags.push(`--jsx-fragment=${jsxFragment}`);\n  if (jsxImportSource) flags.push(`--jsx-import-source=${jsxImportSource}`);\n  if (jsxDev) flags.push(`--jsx-dev`);\n\n  if (define) {\n    for (let key in define) {\n      if (key.indexOf(\"=\") >= 0) throw new Error(`Invalid define: ${key}`);\n      flags.push(`--define:${key}=${define[key]}`);\n    }\n  }\n\n  if (logOverride) {\n    for (let key in logOverride) {\n      if (key.indexOf(\"=\") >= 0) throw new Error(`Invalid log override: ${key}`);\n      flags.push(`--log-override:${key}=${logOverride[key]}`);\n    }\n  }\n\n  if (supported) {\n    for (let key in supported) {\n      if (key.indexOf(\"=\") >= 0) throw new Error(`Invalid supported: ${key}`);\n      flags.push(`--supported:${key}=${supported[key]}`);\n    }\n  }\n\n  if (pure) for (let fn of pure) flags.push(`--pure:${fn}`);\n  if (keepNames) flags.push(`--keep-names`);\n}\n\nfunction flagsForBuildOptions(callName, options, isTTY2, logLevelDefault, writeDefault) {\n  var _a2;\n\n  let flags = [];\n  let entries = [];\n  let keys = /* @__PURE__ */Object.create(null);\n  let stdinContents = null;\n  let stdinResolveDir = null;\n  let watchMode = null;\n  pushLogFlags(flags, options, keys, isTTY2, logLevelDefault);\n  pushCommonFlags(flags, options, keys);\n  let sourcemap = getFlag(options, keys, \"sourcemap\", mustBeStringOrBoolean);\n  let bundle = getFlag(options, keys, \"bundle\", mustBeBoolean);\n  let watch = getFlag(options, keys, \"watch\", mustBeBooleanOrObject);\n  let splitting = getFlag(options, keys, \"splitting\", mustBeBoolean);\n  let preserveSymlinks = getFlag(options, keys, \"preserveSymlinks\", mustBeBoolean);\n  let metafile = getFlag(options, keys, \"metafile\", mustBeBoolean);\n  let outfile = getFlag(options, keys, \"outfile\", mustBeString);\n  let outdir = getFlag(options, keys, \"outdir\", mustBeString);\n  let outbase = getFlag(options, keys, \"outbase\", mustBeString);\n  let tsconfig = getFlag(options, keys, \"tsconfig\", mustBeString);\n  let resolveExtensions = getFlag(options, keys, \"resolveExtensions\", mustBeArray);\n  let nodePathsInput = getFlag(options, keys, \"nodePaths\", mustBeArray);\n  let mainFields = getFlag(options, keys, \"mainFields\", mustBeArray);\n  let conditions = getFlag(options, keys, \"conditions\", mustBeArray);\n  let external = getFlag(options, keys, \"external\", mustBeArray);\n  let loader = getFlag(options, keys, \"loader\", mustBeObject);\n  let outExtension = getFlag(options, keys, \"outExtension\", mustBeObject);\n  let publicPath = getFlag(options, keys, \"publicPath\", mustBeString);\n  let entryNames = getFlag(options, keys, \"entryNames\", mustBeString);\n  let chunkNames = getFlag(options, keys, \"chunkNames\", mustBeString);\n  let assetNames = getFlag(options, keys, \"assetNames\", mustBeString);\n  let inject = getFlag(options, keys, \"inject\", mustBeArray);\n  let banner = getFlag(options, keys, \"banner\", mustBeObject);\n  let footer = getFlag(options, keys, \"footer\", mustBeObject);\n  let entryPoints = getFlag(options, keys, \"entryPoints\", mustBeArrayOrRecord);\n  let absWorkingDir = getFlag(options, keys, \"absWorkingDir\", mustBeString);\n  let stdin = getFlag(options, keys, \"stdin\", mustBeObject);\n  let write = (_a2 = getFlag(options, keys, \"write\", mustBeBoolean)) != null ? _a2 : writeDefault;\n  let allowOverwrite = getFlag(options, keys, \"allowOverwrite\", mustBeBoolean);\n  let incremental = getFlag(options, keys, \"incremental\", mustBeBoolean) === true;\n  let mangleCache = getFlag(options, keys, \"mangleCache\", mustBeObject);\n  keys.plugins = true;\n  checkForInvalidFlags(options, keys, `in ${callName}() call`);\n  if (sourcemap) flags.push(`--sourcemap${sourcemap === true ? \"\" : `=${sourcemap}`}`);\n  if (bundle) flags.push(\"--bundle\");\n  if (allowOverwrite) flags.push(\"--allow-overwrite\");\n\n  if (watch) {\n    flags.push(\"--watch\");\n\n    if (typeof watch === \"boolean\") {\n      watchMode = {};\n    } else {\n      let watchKeys = /* @__PURE__ */Object.create(null);\n      let onRebuild = getFlag(watch, watchKeys, \"onRebuild\", mustBeFunction);\n      checkForInvalidFlags(watch, watchKeys, `on \"watch\" in ${callName}() call`);\n      watchMode = {\n        onRebuild\n      };\n    }\n  }\n\n  if (splitting) flags.push(\"--splitting\");\n  if (preserveSymlinks) flags.push(\"--preserve-symlinks\");\n  if (metafile) flags.push(`--metafile`);\n  if (outfile) flags.push(`--outfile=${outfile}`);\n  if (outdir) flags.push(`--outdir=${outdir}`);\n  if (outbase) flags.push(`--outbase=${outbase}`);\n  if (tsconfig) flags.push(`--tsconfig=${tsconfig}`);\n\n  if (resolveExtensions) {\n    let values = [];\n\n    for (let value of resolveExtensions) {\n      value += \"\";\n      if (value.indexOf(\",\") >= 0) throw new Error(`Invalid resolve extension: ${value}`);\n      values.push(value);\n    }\n\n    flags.push(`--resolve-extensions=${values.join(\",\")}`);\n  }\n\n  if (publicPath) flags.push(`--public-path=${publicPath}`);\n  if (entryNames) flags.push(`--entry-names=${entryNames}`);\n  if (chunkNames) flags.push(`--chunk-names=${chunkNames}`);\n  if (assetNames) flags.push(`--asset-names=${assetNames}`);\n\n  if (mainFields) {\n    let values = [];\n\n    for (let value of mainFields) {\n      value += \"\";\n      if (value.indexOf(\",\") >= 0) throw new Error(`Invalid main field: ${value}`);\n      values.push(value);\n    }\n\n    flags.push(`--main-fields=${values.join(\",\")}`);\n  }\n\n  if (conditions) {\n    let values = [];\n\n    for (let value of conditions) {\n      value += \"\";\n      if (value.indexOf(\",\") >= 0) throw new Error(`Invalid condition: ${value}`);\n      values.push(value);\n    }\n\n    flags.push(`--conditions=${values.join(\",\")}`);\n  }\n\n  if (external) for (let name of external) flags.push(`--external:${name}`);\n\n  if (banner) {\n    for (let type in banner) {\n      if (type.indexOf(\"=\") >= 0) throw new Error(`Invalid banner file type: ${type}`);\n      flags.push(`--banner:${type}=${banner[type]}`);\n    }\n  }\n\n  if (footer) {\n    for (let type in footer) {\n      if (type.indexOf(\"=\") >= 0) throw new Error(`Invalid footer file type: ${type}`);\n      flags.push(`--footer:${type}=${footer[type]}`);\n    }\n  }\n\n  if (inject) for (let path3 of inject) flags.push(`--inject:${path3}`);\n\n  if (loader) {\n    for (let ext in loader) {\n      if (ext.indexOf(\"=\") >= 0) throw new Error(`Invalid loader extension: ${ext}`);\n      flags.push(`--loader:${ext}=${loader[ext]}`);\n    }\n  }\n\n  if (outExtension) {\n    for (let ext in outExtension) {\n      if (ext.indexOf(\"=\") >= 0) throw new Error(`Invalid out extension: ${ext}`);\n      flags.push(`--out-extension:${ext}=${outExtension[ext]}`);\n    }\n  }\n\n  if (entryPoints) {\n    if (Array.isArray(entryPoints)) {\n      for (let entryPoint of entryPoints) {\n        entries.push([\"\", entryPoint + \"\"]);\n      }\n    } else {\n      for (let [key, value] of Object.entries(entryPoints)) {\n        entries.push([key + \"\", value + \"\"]);\n      }\n    }\n  }\n\n  if (stdin) {\n    let stdinKeys = /* @__PURE__ */Object.create(null);\n    let contents = getFlag(stdin, stdinKeys, \"contents\", mustBeStringOrUint8Array);\n    let resolveDir = getFlag(stdin, stdinKeys, \"resolveDir\", mustBeString);\n    let sourcefile = getFlag(stdin, stdinKeys, \"sourcefile\", mustBeString);\n    let loader2 = getFlag(stdin, stdinKeys, \"loader\", mustBeString);\n    checkForInvalidFlags(stdin, stdinKeys, 'in \"stdin\" object');\n    if (sourcefile) flags.push(`--sourcefile=${sourcefile}`);\n    if (loader2) flags.push(`--loader=${loader2}`);\n    if (resolveDir) stdinResolveDir = resolveDir + \"\";\n    if (typeof contents === \"string\") stdinContents = encodeUTF8(contents);else if (contents instanceof Uint8Array) stdinContents = contents;\n  }\n\n  let nodePaths = [];\n\n  if (nodePathsInput) {\n    for (let value of nodePathsInput) {\n      value += \"\";\n      nodePaths.push(value);\n    }\n  }\n\n  return {\n    entries,\n    flags,\n    write,\n    stdinContents,\n    stdinResolveDir,\n    absWorkingDir,\n    incremental,\n    nodePaths,\n    watch: watchMode,\n    mangleCache: validateMangleCache(mangleCache)\n  };\n}\n\nfunction flagsForTransformOptions(callName, options, isTTY2, logLevelDefault) {\n  let flags = [];\n  let keys = /* @__PURE__ */Object.create(null);\n  pushLogFlags(flags, options, keys, isTTY2, logLevelDefault);\n  pushCommonFlags(flags, options, keys);\n  let sourcemap = getFlag(options, keys, \"sourcemap\", mustBeStringOrBoolean);\n  let tsconfigRaw = getFlag(options, keys, \"tsconfigRaw\", mustBeStringOrObject);\n  let sourcefile = getFlag(options, keys, \"sourcefile\", mustBeString);\n  let loader = getFlag(options, keys, \"loader\", mustBeString);\n  let banner = getFlag(options, keys, \"banner\", mustBeString);\n  let footer = getFlag(options, keys, \"footer\", mustBeString);\n  let mangleCache = getFlag(options, keys, \"mangleCache\", mustBeObject);\n  checkForInvalidFlags(options, keys, `in ${callName}() call`);\n  if (sourcemap) flags.push(`--sourcemap=${sourcemap === true ? \"external\" : sourcemap}`);\n  if (tsconfigRaw) flags.push(`--tsconfig-raw=${typeof tsconfigRaw === \"string\" ? tsconfigRaw : JSON.stringify(tsconfigRaw)}`);\n  if (sourcefile) flags.push(`--sourcefile=${sourcefile}`);\n  if (loader) flags.push(`--loader=${loader}`);\n  if (banner) flags.push(`--banner=${banner}`);\n  if (footer) flags.push(`--footer=${footer}`);\n  return {\n    flags,\n    mangleCache: validateMangleCache(mangleCache)\n  };\n}\n\nfunction createChannel(streamIn) {\n  let responseCallbacks = /* @__PURE__ */new Map();\n  let pluginCallbacks = /* @__PURE__ */new Map();\n  let watchCallbacks = /* @__PURE__ */new Map();\n  let serveCallbacks = /* @__PURE__ */new Map();\n  let closeData = null;\n  let nextRequestID = 0;\n  let nextBuildKey = 0;\n  let stdout = new Uint8Array(16 * 1024);\n  let stdoutUsed = 0;\n\n  let readFromStdout = chunk => {\n    let limit = stdoutUsed + chunk.length;\n\n    if (limit > stdout.length) {\n      let swap = new Uint8Array(limit * 2);\n      swap.set(stdout);\n      stdout = swap;\n    }\n\n    stdout.set(chunk, stdoutUsed);\n    stdoutUsed += chunk.length;\n    let offset = 0;\n\n    while (offset + 4 <= stdoutUsed) {\n      let length = readUInt32LE(stdout, offset);\n\n      if (offset + 4 + length > stdoutUsed) {\n        break;\n      }\n\n      offset += 4;\n      handleIncomingPacket(stdout.subarray(offset, offset + length));\n      offset += length;\n    }\n\n    if (offset > 0) {\n      stdout.copyWithin(0, offset, stdoutUsed);\n      stdoutUsed -= offset;\n    }\n  };\n\n  let afterClose = error => {\n    closeData = {\n      reason: error ? \": \" + (error.message || error) : \"\"\n    };\n    const text = \"The service was stopped\" + closeData.reason;\n\n    for (let callback of responseCallbacks.values()) {\n      callback(text, null);\n    }\n\n    responseCallbacks.clear();\n\n    for (let callbacks of serveCallbacks.values()) {\n      callbacks.onWait(text);\n    }\n\n    serveCallbacks.clear();\n\n    for (let callback of watchCallbacks.values()) {\n      try {\n        callback(new Error(text), null);\n      } catch (e) {\n        console.error(e);\n      }\n    }\n\n    watchCallbacks.clear();\n  };\n\n  let sendRequest = (refs, value, callback) => {\n    if (closeData) return callback(\"The service is no longer running\" + closeData.reason, null);\n    let id = nextRequestID++;\n    responseCallbacks.set(id, (error, response) => {\n      try {\n        callback(error, response);\n      } finally {\n        if (refs) refs.unref();\n      }\n    });\n    if (refs) refs.ref();\n    streamIn.writeToStdin(encodePacket({\n      id,\n      isRequest: true,\n      value\n    }));\n  };\n\n  let sendResponse = (id, value) => {\n    if (closeData) throw new Error(\"The service is no longer running\" + closeData.reason);\n    streamIn.writeToStdin(encodePacket({\n      id,\n      isRequest: false,\n      value\n    }));\n  };\n\n  let handleRequest = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (id, request) {\n      try {\n        switch (request.command) {\n          case \"ping\":\n            {\n              sendResponse(id, {});\n              break;\n            }\n\n          case \"on-start\":\n            {\n              let callback = pluginCallbacks.get(request.key);\n              if (!callback) sendResponse(id, {});else sendResponse(id, yield callback(request));\n              break;\n            }\n\n          case \"on-resolve\":\n            {\n              let callback = pluginCallbacks.get(request.key);\n              if (!callback) sendResponse(id, {});else sendResponse(id, yield callback(request));\n              break;\n            }\n\n          case \"on-load\":\n            {\n              let callback = pluginCallbacks.get(request.key);\n              if (!callback) sendResponse(id, {});else sendResponse(id, yield callback(request));\n              break;\n            }\n\n          case \"serve-request\":\n            {\n              let callbacks = serveCallbacks.get(request.key);\n              if (callbacks && callbacks.onRequest) callbacks.onRequest(request.args);\n              sendResponse(id, {});\n              break;\n            }\n\n          case \"serve-wait\":\n            {\n              let callbacks = serveCallbacks.get(request.key);\n              if (callbacks) callbacks.onWait(request.error);\n              sendResponse(id, {});\n              break;\n            }\n\n          case \"watch-rebuild\":\n            {\n              let callback = watchCallbacks.get(request.key);\n\n              try {\n                if (callback) callback(null, request.args);\n              } catch (err) {\n                console.error(err);\n              }\n\n              sendResponse(id, {});\n              break;\n            }\n\n          default:\n            throw new Error(`Invalid command: ` + request.command);\n        }\n      } catch (e) {\n        sendResponse(id, {\n          errors: [extractErrorMessageV8(e, streamIn, null, void 0, \"\")]\n        });\n      }\n    });\n\n    return function handleRequest(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  let isFirstPacket = true;\n\n  let handleIncomingPacket = bytes => {\n    if (isFirstPacket) {\n      isFirstPacket = false;\n      let binaryVersion = String.fromCharCode(...bytes);\n\n      if (binaryVersion !== \"0.15.5\") {\n        throw new Error(`Cannot start service: Host version \"${\"0.15.5\"}\" does not match binary version ${JSON.stringify(binaryVersion)}`);\n      }\n\n      return;\n    }\n\n    let packet = decodePacket(bytes);\n\n    if (packet.isRequest) {\n      handleRequest(packet.id, packet.value);\n    } else {\n      let callback = responseCallbacks.get(packet.id);\n      responseCallbacks.delete(packet.id);\n      if (packet.value.error) callback(packet.value.error, {});else callback(null, packet.value);\n    }\n  };\n\n  let handlePlugins = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(function* (initialOptions, plugins, buildKey, stash, refs) {\n      let onStartCallbacks = [];\n      let onEndCallbacks = [];\n      let onResolveCallbacks = {};\n      let onLoadCallbacks = {};\n      let nextCallbackID = 0;\n      let i = 0;\n      let requestPlugins = [];\n      let isSetupDone = false;\n      plugins = [...plugins];\n\n      for (let item of plugins) {\n        let keys = {};\n        if (typeof item !== \"object\") throw new Error(`Plugin at index ${i} must be an object`);\n        const name = getFlag(item, keys, \"name\", mustBeString);\n        if (typeof name !== \"string\" || name === \"\") throw new Error(`Plugin at index ${i} is missing a name`);\n\n        try {\n          let setup = getFlag(item, keys, \"setup\", mustBeFunction);\n          if (typeof setup !== \"function\") throw new Error(`Plugin is missing a setup function`);\n          checkForInvalidFlags(item, keys, `on plugin ${JSON.stringify(name)}`);\n          let plugin = {\n            name,\n            onResolve: [],\n            onLoad: []\n          };\n          i++;\n\n          let resolve = (path3, options = {}) => {\n            if (!isSetupDone) throw new Error('Cannot call \"resolve\" before plugin setup has completed');\n            if (typeof path3 !== \"string\") throw new Error(`The path to resolve must be a string`);\n            let keys2 = /* @__PURE__ */Object.create(null);\n            let pluginName = getFlag(options, keys2, \"pluginName\", mustBeString);\n            let importer = getFlag(options, keys2, \"importer\", mustBeString);\n            let namespace = getFlag(options, keys2, \"namespace\", mustBeString);\n            let resolveDir = getFlag(options, keys2, \"resolveDir\", mustBeString);\n            let kind = getFlag(options, keys2, \"kind\", mustBeString);\n            let pluginData = getFlag(options, keys2, \"pluginData\", canBeAnything);\n            checkForInvalidFlags(options, keys2, \"in resolve() call\");\n            return new Promise((resolve2, reject) => {\n              const request = {\n                command: \"resolve\",\n                path: path3,\n                key: buildKey,\n                pluginName: name\n              };\n              if (pluginName != null) request.pluginName = pluginName;\n              if (importer != null) request.importer = importer;\n              if (namespace != null) request.namespace = namespace;\n              if (resolveDir != null) request.resolveDir = resolveDir;\n              if (kind != null) request.kind = kind;\n              if (pluginData != null) request.pluginData = stash.store(pluginData);\n              sendRequest(refs, request, (error, response) => {\n                if (error !== null) reject(new Error(error));else resolve2({\n                  errors: replaceDetailsInMessages(response.errors, stash),\n                  warnings: replaceDetailsInMessages(response.warnings, stash),\n                  path: response.path,\n                  external: response.external,\n                  sideEffects: response.sideEffects,\n                  namespace: response.namespace,\n                  suffix: response.suffix,\n                  pluginData: stash.load(response.pluginData)\n                });\n              });\n            });\n          };\n\n          let promise = setup({\n            initialOptions,\n            resolve,\n\n            onStart(callback2) {\n              let registeredText = `This error came from the \"onStart\" callback registered here:`;\n              let registeredNote = extractCallerV8(new Error(registeredText), streamIn, \"onStart\");\n              onStartCallbacks.push({\n                name,\n                callback: callback2,\n                note: registeredNote\n              });\n            },\n\n            onEnd(callback2) {\n              let registeredText = `This error came from the \"onEnd\" callback registered here:`;\n              let registeredNote = extractCallerV8(new Error(registeredText), streamIn, \"onEnd\");\n              onEndCallbacks.push({\n                name,\n                callback: callback2,\n                note: registeredNote\n              });\n            },\n\n            onResolve(options, callback2) {\n              let registeredText = `This error came from the \"onResolve\" callback registered here:`;\n              let registeredNote = extractCallerV8(new Error(registeredText), streamIn, \"onResolve\");\n              let keys2 = {};\n              let filter = getFlag(options, keys2, \"filter\", mustBeRegExp);\n              let namespace = getFlag(options, keys2, \"namespace\", mustBeString);\n              checkForInvalidFlags(options, keys2, `in onResolve() call for plugin ${JSON.stringify(name)}`);\n              if (filter == null) throw new Error(`onResolve() call is missing a filter`);\n              let id = nextCallbackID++;\n              onResolveCallbacks[id] = {\n                name,\n                callback: callback2,\n                note: registeredNote\n              };\n              plugin.onResolve.push({\n                id,\n                filter: filter.source,\n                namespace: namespace || \"\"\n              });\n            },\n\n            onLoad(options, callback2) {\n              let registeredText = `This error came from the \"onLoad\" callback registered here:`;\n              let registeredNote = extractCallerV8(new Error(registeredText), streamIn, \"onLoad\");\n              let keys2 = {};\n              let filter = getFlag(options, keys2, \"filter\", mustBeRegExp);\n              let namespace = getFlag(options, keys2, \"namespace\", mustBeString);\n              checkForInvalidFlags(options, keys2, `in onLoad() call for plugin ${JSON.stringify(name)}`);\n              if (filter == null) throw new Error(`onLoad() call is missing a filter`);\n              let id = nextCallbackID++;\n              onLoadCallbacks[id] = {\n                name,\n                callback: callback2,\n                note: registeredNote\n              };\n              plugin.onLoad.push({\n                id,\n                filter: filter.source,\n                namespace: namespace || \"\"\n              });\n            },\n\n            esbuild: streamIn.esbuild\n          });\n          if (promise) yield promise;\n          requestPlugins.push(plugin);\n        } catch (e) {\n          return {\n            ok: false,\n            error: e,\n            pluginName: name\n          };\n        }\n      }\n\n      const callback = /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator(function* (request) {\n          switch (request.command) {\n            case \"on-start\":\n              {\n                let response = {\n                  errors: [],\n                  warnings: []\n                };\n                yield Promise.all(onStartCallbacks.map( /*#__PURE__*/function () {\n                  var _ref4 = _asyncToGenerator(function* ({\n                    name,\n                    callback: callback2,\n                    note\n                  }) {\n                    try {\n                      let result = yield callback2();\n\n                      if (result != null) {\n                        if (typeof result !== \"object\") throw new Error(`Expected onStart() callback in plugin ${JSON.stringify(name)} to return an object`);\n                        let keys = {};\n                        let errors = getFlag(result, keys, \"errors\", mustBeArray);\n                        let warnings = getFlag(result, keys, \"warnings\", mustBeArray);\n                        checkForInvalidFlags(result, keys, `from onStart() callback in plugin ${JSON.stringify(name)}`);\n                        if (errors != null) response.errors.push(...sanitizeMessages(errors, \"errors\", stash, name));\n                        if (warnings != null) response.warnings.push(...sanitizeMessages(warnings, \"warnings\", stash, name));\n                      }\n                    } catch (e) {\n                      response.errors.push(extractErrorMessageV8(e, streamIn, stash, note && note(), name));\n                    }\n                  });\n\n                  return function (_x9) {\n                    return _ref4.apply(this, arguments);\n                  };\n                }()));\n                return response;\n              }\n\n            case \"on-resolve\":\n              {\n                let response = {},\n                    name = \"\",\n                    callback2,\n                    note;\n\n                for (let id of request.ids) {\n                  try {\n                    ({\n                      name,\n                      callback: callback2,\n                      note\n                    } = onResolveCallbacks[id]);\n                    let result = yield callback2({\n                      path: request.path,\n                      importer: request.importer,\n                      namespace: request.namespace,\n                      resolveDir: request.resolveDir,\n                      kind: request.kind,\n                      pluginData: stash.load(request.pluginData)\n                    });\n\n                    if (result != null) {\n                      if (typeof result !== \"object\") throw new Error(`Expected onResolve() callback in plugin ${JSON.stringify(name)} to return an object`);\n                      let keys = {};\n                      let pluginName = getFlag(result, keys, \"pluginName\", mustBeString);\n                      let path3 = getFlag(result, keys, \"path\", mustBeString);\n                      let namespace = getFlag(result, keys, \"namespace\", mustBeString);\n                      let suffix = getFlag(result, keys, \"suffix\", mustBeString);\n                      let external = getFlag(result, keys, \"external\", mustBeBoolean);\n                      let sideEffects = getFlag(result, keys, \"sideEffects\", mustBeBoolean);\n                      let pluginData = getFlag(result, keys, \"pluginData\", canBeAnything);\n                      let errors = getFlag(result, keys, \"errors\", mustBeArray);\n                      let warnings = getFlag(result, keys, \"warnings\", mustBeArray);\n                      let watchFiles = getFlag(result, keys, \"watchFiles\", mustBeArray);\n                      let watchDirs = getFlag(result, keys, \"watchDirs\", mustBeArray);\n                      checkForInvalidFlags(result, keys, `from onResolve() callback in plugin ${JSON.stringify(name)}`);\n                      response.id = id;\n                      if (pluginName != null) response.pluginName = pluginName;\n                      if (path3 != null) response.path = path3;\n                      if (namespace != null) response.namespace = namespace;\n                      if (suffix != null) response.suffix = suffix;\n                      if (external != null) response.external = external;\n                      if (sideEffects != null) response.sideEffects = sideEffects;\n                      if (pluginData != null) response.pluginData = stash.store(pluginData);\n                      if (errors != null) response.errors = sanitizeMessages(errors, \"errors\", stash, name);\n                      if (warnings != null) response.warnings = sanitizeMessages(warnings, \"warnings\", stash, name);\n                      if (watchFiles != null) response.watchFiles = sanitizeStringArray(watchFiles, \"watchFiles\");\n                      if (watchDirs != null) response.watchDirs = sanitizeStringArray(watchDirs, \"watchDirs\");\n                      break;\n                    }\n                  } catch (e) {\n                    return {\n                      id,\n                      errors: [extractErrorMessageV8(e, streamIn, stash, note && note(), name)]\n                    };\n                  }\n                }\n\n                return response;\n              }\n\n            case \"on-load\":\n              {\n                let response = {},\n                    name = \"\",\n                    callback2,\n                    note;\n\n                for (let id of request.ids) {\n                  try {\n                    ({\n                      name,\n                      callback: callback2,\n                      note\n                    } = onLoadCallbacks[id]);\n                    let result = yield callback2({\n                      path: request.path,\n                      namespace: request.namespace,\n                      suffix: request.suffix,\n                      pluginData: stash.load(request.pluginData)\n                    });\n\n                    if (result != null) {\n                      if (typeof result !== \"object\") throw new Error(`Expected onLoad() callback in plugin ${JSON.stringify(name)} to return an object`);\n                      let keys = {};\n                      let pluginName = getFlag(result, keys, \"pluginName\", mustBeString);\n                      let contents = getFlag(result, keys, \"contents\", mustBeStringOrUint8Array);\n                      let resolveDir = getFlag(result, keys, \"resolveDir\", mustBeString);\n                      let pluginData = getFlag(result, keys, \"pluginData\", canBeAnything);\n                      let loader = getFlag(result, keys, \"loader\", mustBeString);\n                      let errors = getFlag(result, keys, \"errors\", mustBeArray);\n                      let warnings = getFlag(result, keys, \"warnings\", mustBeArray);\n                      let watchFiles = getFlag(result, keys, \"watchFiles\", mustBeArray);\n                      let watchDirs = getFlag(result, keys, \"watchDirs\", mustBeArray);\n                      checkForInvalidFlags(result, keys, `from onLoad() callback in plugin ${JSON.stringify(name)}`);\n                      response.id = id;\n                      if (pluginName != null) response.pluginName = pluginName;\n                      if (contents instanceof Uint8Array) response.contents = contents;else if (contents != null) response.contents = encodeUTF8(contents);\n                      if (resolveDir != null) response.resolveDir = resolveDir;\n                      if (pluginData != null) response.pluginData = stash.store(pluginData);\n                      if (loader != null) response.loader = loader;\n                      if (errors != null) response.errors = sanitizeMessages(errors, \"errors\", stash, name);\n                      if (warnings != null) response.warnings = sanitizeMessages(warnings, \"warnings\", stash, name);\n                      if (watchFiles != null) response.watchFiles = sanitizeStringArray(watchFiles, \"watchFiles\");\n                      if (watchDirs != null) response.watchDirs = sanitizeStringArray(watchDirs, \"watchDirs\");\n                      break;\n                    }\n                  } catch (e) {\n                    return {\n                      id,\n                      errors: [extractErrorMessageV8(e, streamIn, stash, note && note(), name)]\n                    };\n                  }\n                }\n\n                return response;\n              }\n\n            default:\n              throw new Error(`Invalid command: ` + request.command);\n          }\n        });\n\n        return function callback(_x8) {\n          return _ref3.apply(this, arguments);\n        };\n      }();\n\n      let runOnEndCallbacks = (result, logPluginError, done) => done();\n\n      if (onEndCallbacks.length > 0) {\n        runOnEndCallbacks = (result, logPluginError, done) => {\n          _asyncToGenerator(function* () {\n            for (const {\n              name,\n              callback: callback2,\n              note\n            } of onEndCallbacks) {\n              try {\n                yield callback2(result);\n              } catch (e) {\n                result.errors.push(yield new Promise(resolve => logPluginError(e, name, note && note(), resolve)));\n              }\n            }\n          })().then(done);\n        };\n      }\n\n      isSetupDone = true;\n      let refCount = 0;\n      return {\n        ok: true,\n        requestPlugins,\n        runOnEndCallbacks,\n        pluginRefs: {\n          ref() {\n            if (++refCount === 1) pluginCallbacks.set(buildKey, callback);\n          },\n\n          unref() {\n            if (--refCount === 0) pluginCallbacks.delete(buildKey);\n          }\n\n        }\n      };\n    });\n\n    return function handlePlugins(_x3, _x4, _x5, _x6, _x7) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  let buildServeData = (refs, options, request, key) => {\n    let keys = {};\n    let port = getFlag(options, keys, \"port\", mustBeInteger);\n    let host = getFlag(options, keys, \"host\", mustBeString);\n    let servedir = getFlag(options, keys, \"servedir\", mustBeString);\n    let onRequest = getFlag(options, keys, \"onRequest\", mustBeFunction);\n    let onWait;\n    let wait = new Promise((resolve, reject) => {\n      onWait = error => {\n        serveCallbacks.delete(key);\n        if (error !== null) reject(new Error(error));else resolve();\n      };\n    });\n    request.serve = {};\n    checkForInvalidFlags(options, keys, `in serve() call`);\n    if (port !== void 0) request.serve.port = port;\n    if (host !== void 0) request.serve.host = host;\n    if (servedir !== void 0) request.serve.servedir = servedir;\n    serveCallbacks.set(key, {\n      onRequest,\n      onWait\n    });\n    return {\n      wait,\n\n      stop() {\n        sendRequest(refs, {\n          command: \"serve-stop\",\n          key\n        }, () => {});\n      }\n\n    };\n  };\n\n  const buildLogLevelDefault = \"warning\";\n  const transformLogLevelDefault = \"silent\";\n\n  let buildOrServe = args => {\n    let key = nextBuildKey++;\n    const details = createObjectStash();\n    let plugins;\n    let {\n      refs,\n      options,\n      isTTY: isTTY2,\n      callback\n    } = args;\n\n    if (typeof options === \"object\") {\n      let value = options.plugins;\n\n      if (value !== void 0) {\n        if (!Array.isArray(value)) throw new Error(`\"plugins\" must be an array`);\n        plugins = value;\n      }\n    }\n\n    let logPluginError = (e, pluginName, note, done) => {\n      let flags = [];\n\n      try {\n        pushLogFlags(flags, options, {}, isTTY2, buildLogLevelDefault);\n      } catch {}\n\n      const message = extractErrorMessageV8(e, streamIn, details, note, pluginName);\n      sendRequest(refs, {\n        command: \"error\",\n        flags,\n        error: message\n      }, () => {\n        message.detail = details.load(message.detail);\n        done(message);\n      });\n    };\n\n    let handleError = (e, pluginName) => {\n      logPluginError(e, pluginName, void 0, error => {\n        callback(failureErrorWithLog(\"Build failed\", [error], []), null);\n      });\n    };\n\n    if (plugins && plugins.length > 0) {\n      if (streamIn.isSync) return handleError(new Error(\"Cannot use plugins in synchronous API calls\"), \"\");\n      handlePlugins(options, plugins, key, details, refs).then(result => {\n        if (!result.ok) {\n          handleError(result.error, result.pluginName);\n        } else {\n          try {\n            buildOrServeContinue({ ...args,\n              key,\n              details,\n              logPluginError,\n              requestPlugins: result.requestPlugins,\n              runOnEndCallbacks: result.runOnEndCallbacks,\n              pluginRefs: result.pluginRefs\n            });\n          } catch (e) {\n            handleError(e, \"\");\n          }\n        }\n      }, e => handleError(e, \"\"));\n    } else {\n      try {\n        buildOrServeContinue({ ...args,\n          key,\n          details,\n          logPluginError,\n          requestPlugins: null,\n          runOnEndCallbacks: (result, logPluginError2, done) => done(),\n          pluginRefs: null\n        });\n      } catch (e) {\n        handleError(e, \"\");\n      }\n    }\n  };\n\n  let buildOrServeContinue = ({\n    callName,\n    refs: callerRefs,\n    serveOptions,\n    options,\n    isTTY: isTTY2,\n    defaultWD: defaultWD2,\n    callback,\n    key,\n    details,\n    logPluginError,\n    requestPlugins,\n    runOnEndCallbacks,\n    pluginRefs\n  }) => {\n    const refs = {\n      ref() {\n        if (pluginRefs) pluginRefs.ref();\n        if (callerRefs) callerRefs.ref();\n      },\n\n      unref() {\n        if (pluginRefs) pluginRefs.unref();\n        if (callerRefs) callerRefs.unref();\n      }\n\n    };\n    let writeDefault = !streamIn.isWriteUnavailable;\n    let {\n      entries,\n      flags,\n      write,\n      stdinContents,\n      stdinResolveDir,\n      absWorkingDir,\n      incremental,\n      nodePaths,\n      watch,\n      mangleCache\n    } = flagsForBuildOptions(callName, options, isTTY2, buildLogLevelDefault, writeDefault);\n    let request = {\n      command: \"build\",\n      key,\n      entries,\n      flags,\n      write,\n      stdinContents,\n      stdinResolveDir,\n      absWorkingDir: absWorkingDir || defaultWD2,\n      incremental,\n      nodePaths\n    };\n    if (requestPlugins) request.plugins = requestPlugins;\n    if (mangleCache) request.mangleCache = mangleCache;\n    let serve2 = serveOptions && buildServeData(refs, serveOptions, request, key);\n    let rebuild;\n    let stop;\n\n    let copyResponseToResult = (response, result) => {\n      if (response.outputFiles) result.outputFiles = response.outputFiles.map(convertOutputFiles);\n      if (response.metafile) result.metafile = JSON.parse(response.metafile);\n      if (response.mangleCache) result.mangleCache = response.mangleCache;\n      if (response.writeToStdout !== void 0) console.log(decodeUTF8(response.writeToStdout).replace(/\\n$/, \"\"));\n    };\n\n    let buildResponseToResult = (response, callback2) => {\n      let result = {\n        errors: replaceDetailsInMessages(response.errors, details),\n        warnings: replaceDetailsInMessages(response.warnings, details)\n      };\n      copyResponseToResult(response, result);\n      runOnEndCallbacks(result, logPluginError, () => {\n        if (result.errors.length > 0) {\n          return callback2(failureErrorWithLog(\"Build failed\", result.errors, result.warnings), null);\n        }\n\n        if (response.rebuild) {\n          if (!rebuild) {\n            let isDisposed = false;\n\n            rebuild = () => new Promise((resolve, reject) => {\n              if (isDisposed || closeData) throw new Error(\"Cannot rebuild\");\n              sendRequest(refs, {\n                command: \"rebuild\",\n                key\n              }, (error2, response2) => {\n                if (error2) {\n                  const message = {\n                    id: \"\",\n                    pluginName: \"\",\n                    text: error2,\n                    location: null,\n                    notes: [],\n                    detail: void 0\n                  };\n                  return callback2(failureErrorWithLog(\"Build failed\", [message], []), null);\n                }\n\n                buildResponseToResult(response2, (error3, result3) => {\n                  if (error3) reject(error3);else resolve(result3);\n                });\n              });\n            });\n\n            refs.ref();\n\n            rebuild.dispose = () => {\n              if (isDisposed) return;\n              isDisposed = true;\n              sendRequest(refs, {\n                command: \"rebuild-dispose\",\n                key\n              }, () => {});\n              refs.unref();\n            };\n          }\n\n          result.rebuild = rebuild;\n        }\n\n        if (response.watch) {\n          if (!stop) {\n            let isStopped = false;\n            refs.ref();\n\n            stop = () => {\n              if (isStopped) return;\n              isStopped = true;\n              watchCallbacks.delete(key);\n              sendRequest(refs, {\n                command: \"watch-stop\",\n                key\n              }, () => {});\n              refs.unref();\n            };\n\n            if (watch) {\n              watchCallbacks.set(key, (serviceStopError, watchResponse) => {\n                if (serviceStopError) {\n                  if (watch.onRebuild) watch.onRebuild(serviceStopError, null);\n                  return;\n                }\n\n                let result2 = {\n                  errors: replaceDetailsInMessages(watchResponse.errors, details),\n                  warnings: replaceDetailsInMessages(watchResponse.warnings, details)\n                };\n                copyResponseToResult(watchResponse, result2);\n                runOnEndCallbacks(result2, logPluginError, () => {\n                  if (result2.errors.length > 0) {\n                    if (watch.onRebuild) watch.onRebuild(failureErrorWithLog(\"Build failed\", result2.errors, result2.warnings), null);\n                    return;\n                  }\n\n                  if (watchResponse.rebuildID !== void 0) result2.rebuild = rebuild;\n                  result2.stop = stop;\n                  if (watch.onRebuild) watch.onRebuild(null, result2);\n                });\n              });\n            }\n          }\n\n          result.stop = stop;\n        }\n\n        callback2(null, result);\n      });\n    };\n\n    if (write && streamIn.isWriteUnavailable) throw new Error(`The \"write\" option is unavailable in this environment`);\n    if (incremental && streamIn.isSync) throw new Error(`Cannot use \"incremental\" with a synchronous build`);\n    if (watch && streamIn.isSync) throw new Error(`Cannot use \"watch\" with a synchronous build`);\n    sendRequest(refs, request, (error, response) => {\n      if (error) return callback(new Error(error), null);\n\n      if (serve2) {\n        let serveResponse = response;\n        let isStopped = false;\n        refs.ref();\n        let result = {\n          port: serveResponse.port,\n          host: serveResponse.host,\n          wait: serve2.wait,\n\n          stop() {\n            if (isStopped) return;\n            isStopped = true;\n            serve2.stop();\n            refs.unref();\n          }\n\n        };\n        refs.ref();\n        serve2.wait.then(refs.unref, refs.unref);\n        return callback(null, result);\n      }\n\n      return buildResponseToResult(response, callback);\n    });\n  };\n\n  let transform2 = ({\n    callName,\n    refs,\n    input,\n    options,\n    isTTY: isTTY2,\n    fs: fs3,\n    callback\n  }) => {\n    const details = createObjectStash();\n\n    let start = inputPath => {\n      try {\n        if (typeof input !== \"string\" && !(input instanceof Uint8Array)) throw new Error('The input to \"transform\" must be a string or a Uint8Array');\n        let {\n          flags,\n          mangleCache\n        } = flagsForTransformOptions(callName, options, isTTY2, transformLogLevelDefault);\n        let request = {\n          command: \"transform\",\n          flags,\n          inputFS: inputPath !== null,\n          input: inputPath !== null ? encodeUTF8(inputPath) : typeof input === \"string\" ? encodeUTF8(input) : input\n        };\n        if (mangleCache) request.mangleCache = mangleCache;\n        sendRequest(refs, request, (error, response) => {\n          if (error) return callback(new Error(error), null);\n          let errors = replaceDetailsInMessages(response.errors, details);\n          let warnings = replaceDetailsInMessages(response.warnings, details);\n          let outstanding = 1;\n\n          let next = () => {\n            if (--outstanding === 0) {\n              let result = {\n                warnings,\n                code: response.code,\n                map: response.map\n              };\n              if (response.mangleCache) result.mangleCache = response == null ? void 0 : response.mangleCache;\n              callback(null, result);\n            }\n          };\n\n          if (errors.length > 0) return callback(failureErrorWithLog(\"Transform failed\", errors, warnings), null);\n\n          if (response.codeFS) {\n            outstanding++;\n            fs3.readFile(response.code, (err, contents) => {\n              if (err !== null) {\n                callback(err, null);\n              } else {\n                response.code = contents;\n                next();\n              }\n            });\n          }\n\n          if (response.mapFS) {\n            outstanding++;\n            fs3.readFile(response.map, (err, contents) => {\n              if (err !== null) {\n                callback(err, null);\n              } else {\n                response.map = contents;\n                next();\n              }\n            });\n          }\n\n          next();\n        });\n      } catch (e) {\n        let flags = [];\n\n        try {\n          pushLogFlags(flags, options, {}, isTTY2, transformLogLevelDefault);\n        } catch {}\n\n        const error = extractErrorMessageV8(e, streamIn, details, void 0, \"\");\n        sendRequest(refs, {\n          command: \"error\",\n          flags,\n          error\n        }, () => {\n          error.detail = details.load(error.detail);\n          callback(failureErrorWithLog(\"Transform failed\", [error], []), null);\n        });\n      }\n    };\n\n    if ((typeof input === \"string\" || input instanceof Uint8Array) && input.length > 1024 * 1024) {\n      let next = start;\n\n      start = () => fs3.writeFile(input, next);\n    }\n\n    start(null);\n  };\n\n  let formatMessages2 = ({\n    callName,\n    refs,\n    messages,\n    options,\n    callback\n  }) => {\n    let result = sanitizeMessages(messages, \"messages\", null, \"\");\n    if (!options) throw new Error(`Missing second argument in ${callName}() call`);\n    let keys = {};\n    let kind = getFlag(options, keys, \"kind\", mustBeString);\n    let color = getFlag(options, keys, \"color\", mustBeBoolean);\n    let terminalWidth = getFlag(options, keys, \"terminalWidth\", mustBeInteger);\n    checkForInvalidFlags(options, keys, `in ${callName}() call`);\n    if (kind === void 0) throw new Error(`Missing \"kind\" in ${callName}() call`);\n    if (kind !== \"error\" && kind !== \"warning\") throw new Error(`Expected \"kind\" to be \"error\" or \"warning\" in ${callName}() call`);\n    let request = {\n      command: \"format-msgs\",\n      messages: result,\n      isWarning: kind === \"warning\"\n    };\n    if (color !== void 0) request.color = color;\n    if (terminalWidth !== void 0) request.terminalWidth = terminalWidth;\n    sendRequest(refs, request, (error, response) => {\n      if (error) return callback(new Error(error), null);\n      callback(null, response.messages);\n    });\n  };\n\n  let analyzeMetafile2 = ({\n    callName,\n    refs,\n    metafile,\n    options,\n    callback\n  }) => {\n    if (options === void 0) options = {};\n    let keys = {};\n    let color = getFlag(options, keys, \"color\", mustBeBoolean);\n    let verbose = getFlag(options, keys, \"verbose\", mustBeBoolean);\n    checkForInvalidFlags(options, keys, `in ${callName}() call`);\n    let request = {\n      command: \"analyze-metafile\",\n      metafile\n    };\n    if (color !== void 0) request.color = color;\n    if (verbose !== void 0) request.verbose = verbose;\n    sendRequest(refs, request, (error, response) => {\n      if (error) return callback(new Error(error), null);\n      callback(null, response.result);\n    });\n  };\n\n  return {\n    readFromStdout,\n    afterClose,\n    service: {\n      buildOrServe,\n      transform: transform2,\n      formatMessages: formatMessages2,\n      analyzeMetafile: analyzeMetafile2\n    }\n  };\n}\n\nfunction createObjectStash() {\n  const map = /* @__PURE__ */new Map();\n  let nextID = 0;\n  return {\n    load(id) {\n      return map.get(id);\n    },\n\n    store(value) {\n      if (value === void 0) return -1;\n      const id = nextID++;\n      map.set(id, value);\n      return id;\n    }\n\n  };\n}\n\nfunction extractCallerV8(e, streamIn, ident) {\n  let note;\n  let tried = false;\n  return () => {\n    if (tried) return note;\n    tried = true;\n\n    try {\n      let lines = (e.stack + \"\").split(\"\\n\");\n      lines.splice(1, 1);\n      let location = parseStackLinesV8(streamIn, lines, ident);\n\n      if (location) {\n        note = {\n          text: e.message,\n          location\n        };\n        return note;\n      }\n    } catch {}\n  };\n}\n\nfunction extractErrorMessageV8(e, streamIn, stash, note, pluginName) {\n  let text = \"Internal error\";\n  let location = null;\n\n  try {\n    text = (e && e.message || e) + \"\";\n  } catch {}\n\n  try {\n    location = parseStackLinesV8(streamIn, (e.stack + \"\").split(\"\\n\"), \"\");\n  } catch {}\n\n  return {\n    id: \"\",\n    pluginName,\n    text,\n    location,\n    notes: note ? [note] : [],\n    detail: stash ? stash.store(e) : -1\n  };\n}\n\nfunction parseStackLinesV8(streamIn, lines, ident) {\n  let at = \"    at \";\n\n  if (streamIn.readFileSync && !lines[0].startsWith(at) && lines[1].startsWith(at)) {\n    for (let i = 1; i < lines.length; i++) {\n      let line = lines[i];\n      if (!line.startsWith(at)) continue;\n      line = line.slice(at.length);\n\n      while (true) {\n        let match = /^(?:new |async )?\\S+ \\((.*)\\)$/.exec(line);\n\n        if (match) {\n          line = match[1];\n          continue;\n        }\n\n        match = /^eval at \\S+ \\((.*)\\)(?:, \\S+:\\d+:\\d+)?$/.exec(line);\n\n        if (match) {\n          line = match[1];\n          continue;\n        }\n\n        match = /^(\\S+):(\\d+):(\\d+)$/.exec(line);\n\n        if (match) {\n          let contents;\n\n          try {\n            contents = streamIn.readFileSync(match[1], \"utf8\");\n          } catch {\n            break;\n          }\n\n          let lineText = contents.split(/\\r\\n|\\r|\\n|\\u2028|\\u2029/)[+match[2] - 1] || \"\";\n          let column = +match[3] - 1;\n          let length = lineText.slice(column, column + ident.length) === ident ? ident.length : 0;\n          return {\n            file: match[1],\n            namespace: \"file\",\n            line: +match[2],\n            column: encodeUTF8(lineText.slice(0, column)).length,\n            length: encodeUTF8(lineText.slice(column, column + length)).length,\n            lineText: lineText + \"\\n\" + lines.slice(1).join(\"\\n\"),\n            suggestion: \"\"\n          };\n        }\n\n        break;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction failureErrorWithLog(text, errors, warnings) {\n  let limit = 5;\n  let summary = errors.length < 1 ? \"\" : ` with ${errors.length} error${errors.length < 2 ? \"\" : \"s\"}:` + errors.slice(0, limit + 1).map((e, i) => {\n    if (i === limit) return \"\\n...\";\n    if (!e.location) return `\nerror: ${e.text}`;\n    let {\n      file,\n      line,\n      column\n    } = e.location;\n    let pluginText = e.pluginName ? `[plugin: ${e.pluginName}] ` : \"\";\n    return `\n${file}:${line}:${column}: ERROR: ${pluginText}${e.text}`;\n  }).join(\"\");\n  let error = new Error(`${text}${summary}`);\n  error.errors = errors;\n  error.warnings = warnings;\n  return error;\n}\n\nfunction replaceDetailsInMessages(messages, stash) {\n  for (const message of messages) {\n    message.detail = stash.load(message.detail);\n  }\n\n  return messages;\n}\n\nfunction sanitizeLocation(location, where) {\n  if (location == null) return null;\n  let keys = {};\n  let file = getFlag(location, keys, \"file\", mustBeString);\n  let namespace = getFlag(location, keys, \"namespace\", mustBeString);\n  let line = getFlag(location, keys, \"line\", mustBeInteger);\n  let column = getFlag(location, keys, \"column\", mustBeInteger);\n  let length = getFlag(location, keys, \"length\", mustBeInteger);\n  let lineText = getFlag(location, keys, \"lineText\", mustBeString);\n  let suggestion = getFlag(location, keys, \"suggestion\", mustBeString);\n  checkForInvalidFlags(location, keys, where);\n  return {\n    file: file || \"\",\n    namespace: namespace || \"\",\n    line: line || 0,\n    column: column || 0,\n    length: length || 0,\n    lineText: lineText || \"\",\n    suggestion: suggestion || \"\"\n  };\n}\n\nfunction sanitizeMessages(messages, property, stash, fallbackPluginName) {\n  let messagesClone = [];\n  let index = 0;\n\n  for (const message of messages) {\n    let keys = {};\n    let id = getFlag(message, keys, \"id\", mustBeString);\n    let pluginName = getFlag(message, keys, \"pluginName\", mustBeString);\n    let text = getFlag(message, keys, \"text\", mustBeString);\n    let location = getFlag(message, keys, \"location\", mustBeObjectOrNull);\n    let notes = getFlag(message, keys, \"notes\", mustBeArray);\n    let detail = getFlag(message, keys, \"detail\", canBeAnything);\n    let where = `in element ${index} of \"${property}\"`;\n    checkForInvalidFlags(message, keys, where);\n    let notesClone = [];\n\n    if (notes) {\n      for (const note of notes) {\n        let noteKeys = {};\n        let noteText = getFlag(note, noteKeys, \"text\", mustBeString);\n        let noteLocation = getFlag(note, noteKeys, \"location\", mustBeObjectOrNull);\n        checkForInvalidFlags(note, noteKeys, where);\n        notesClone.push({\n          text: noteText || \"\",\n          location: sanitizeLocation(noteLocation, where)\n        });\n      }\n    }\n\n    messagesClone.push({\n      id: id || \"\",\n      pluginName: pluginName || fallbackPluginName,\n      text: text || \"\",\n      location: sanitizeLocation(location, where),\n      notes: notesClone,\n      detail: stash ? stash.store(detail) : -1\n    });\n    index++;\n  }\n\n  return messagesClone;\n}\n\nfunction sanitizeStringArray(values, property) {\n  const result = [];\n\n  for (const value of values) {\n    if (typeof value !== \"string\") throw new Error(`${JSON.stringify(property)} must be an array of strings`);\n    result.push(value);\n  }\n\n  return result;\n}\n\nfunction convertOutputFiles({\n  path: path3,\n  contents\n}) {\n  let text = null;\n  return {\n    path: path3,\n    contents,\n\n    get text() {\n      const binary = this.contents;\n\n      if (text === null || binary !== contents) {\n        contents = binary;\n        text = decodeUTF8(binary);\n      }\n\n      return text;\n    }\n\n  };\n} // lib/npm/node-platform.ts\n\n\nvar fs = require(\"fs\");\n\nvar os = require(\"os\");\n\nvar path = require(\"path\");\n\nvar ESBUILD_BINARY_PATH = process.env.ESBUILD_BINARY_PATH || ESBUILD_BINARY_PATH;\nvar knownWindowsPackages = {\n  \"win32 arm64 LE\": \"esbuild-windows-arm64\",\n  \"win32 ia32 LE\": \"esbuild-windows-32\",\n  \"win32 x64 LE\": \"esbuild-windows-64\"\n};\nvar knownUnixlikePackages = {\n  \"android arm64 LE\": \"esbuild-android-arm64\",\n  \"darwin arm64 LE\": \"esbuild-darwin-arm64\",\n  \"darwin x64 LE\": \"esbuild-darwin-64\",\n  \"freebsd arm64 LE\": \"esbuild-freebsd-arm64\",\n  \"freebsd x64 LE\": \"esbuild-freebsd-64\",\n  \"linux arm LE\": \"esbuild-linux-arm\",\n  \"linux arm64 LE\": \"esbuild-linux-arm64\",\n  \"linux ia32 LE\": \"esbuild-linux-32\",\n  \"linux mips64el LE\": \"esbuild-linux-mips64le\",\n  \"linux ppc64 LE\": \"esbuild-linux-ppc64le\",\n  \"linux riscv64 LE\": \"esbuild-linux-riscv64\",\n  \"linux s390x BE\": \"esbuild-linux-s390x\",\n  \"linux x64 LE\": \"esbuild-linux-64\",\n  \"linux loong64 LE\": \"@esbuild/linux-loong64\",\n  \"netbsd x64 LE\": \"esbuild-netbsd-64\",\n  \"openbsd x64 LE\": \"esbuild-openbsd-64\",\n  \"sunos x64 LE\": \"esbuild-sunos-64\"\n};\nvar knownWebAssemblyFallbackPackages = {\n  \"android x64 LE\": \"esbuild-android-64\"\n};\n\nfunction pkgAndSubpathForCurrentPlatform() {\n  let pkg;\n  let subpath;\n  let isWASM = false;\n  let platformKey = `${process.platform} ${os.arch()} ${os.endianness()}`;\n\n  if (platformKey in knownWindowsPackages) {\n    pkg = knownWindowsPackages[platformKey];\n    subpath = \"esbuild.exe\";\n  } else if (platformKey in knownUnixlikePackages) {\n    pkg = knownUnixlikePackages[platformKey];\n    subpath = \"bin/esbuild\";\n  } else if (platformKey in knownWebAssemblyFallbackPackages) {\n    pkg = knownWebAssemblyFallbackPackages[platformKey];\n    subpath = \"bin/esbuild\";\n    isWASM = true;\n  } else {\n    throw new Error(`Unsupported platform: ${platformKey}`);\n  }\n\n  return {\n    pkg,\n    subpath,\n    isWASM\n  };\n}\n\nfunction pkgForSomeOtherPlatform() {\n  const libMainJS = require.resolve(\"esbuild\");\n\n  const nodeModulesDirectory = path.dirname(path.dirname(path.dirname(libMainJS)));\n\n  if (path.basename(nodeModulesDirectory) === \"node_modules\") {\n    for (const unixKey in knownUnixlikePackages) {\n      try {\n        const pkg = knownUnixlikePackages[unixKey];\n        if (fs.existsSync(path.join(nodeModulesDirectory, pkg))) return pkg;\n      } catch {}\n    }\n\n    for (const windowsKey in knownWindowsPackages) {\n      try {\n        const pkg = knownWindowsPackages[windowsKey];\n        if (fs.existsSync(path.join(nodeModulesDirectory, pkg))) return pkg;\n      } catch {}\n    }\n  }\n\n  return null;\n}\n\nfunction downloadedBinPath(pkg, subpath) {\n  const esbuildLibDir = path.dirname(require.resolve(\"esbuild\"));\n  return path.join(esbuildLibDir, `downloaded-${pkg}-${path.basename(subpath)}`);\n}\n\nfunction generateBinPath() {\n  if (ESBUILD_BINARY_PATH) {\n    return {\n      binPath: ESBUILD_BINARY_PATH,\n      isWASM: false\n    };\n  }\n\n  const {\n    pkg,\n    subpath,\n    isWASM\n  } = pkgAndSubpathForCurrentPlatform();\n  let binPath;\n\n  try {\n    binPath = require.resolve(`${pkg}/${subpath}`);\n  } catch (e) {\n    binPath = downloadedBinPath(pkg, subpath);\n\n    if (!fs.existsSync(binPath)) {\n      try {\n        require.resolve(pkg);\n      } catch {\n        const otherPkg = pkgForSomeOtherPlatform();\n\n        if (otherPkg) {\n          throw new Error(`\nYou installed esbuild on another platform than the one you're currently using.\nThis won't work because esbuild is written with native code and needs to\ninstall a platform-specific binary executable.\n\nSpecifically the \"${otherPkg}\" package is present but this platform\nneeds the \"${pkg}\" package instead. People often get into this\nsituation by installing esbuild on Windows or macOS and copying \"node_modules\"\ninto a Docker image that runs Linux, or by copying \"node_modules\" between\nWindows and WSL environments.\n\nIf you are installing with npm, you can try not copying the \"node_modules\"\ndirectory when you copy the files over, and running \"npm ci\" or \"npm install\"\non the destination platform after the copy. Or you could consider using yarn\ninstead which has built-in support for installing a package on multiple\nplatforms simultaneously.\n\nIf you are installing with yarn, you can try listing both this platform and the\nother platform in your \".yarnrc.yml\" file using the \"supportedArchitectures\"\nfeature: https://yarnpkg.com/configuration/yarnrc/#supportedArchitectures\nKeep in mind that this means multiple copies of esbuild will be present.\n\nAnother alternative is to use the \"esbuild-wasm\" package instead, which works\nthe same way on all platforms. But it comes with a heavy performance cost and\ncan sometimes be 10x slower than the \"esbuild\" package, so you may also not\nwant to do that.\n`);\n        }\n\n        throw new Error(`The package \"${pkg}\" could not be found, and is needed by esbuild.\n\nIf you are installing esbuild with npm, make sure that you don't specify the\n\"--no-optional\" flag. The \"optionalDependencies\" package.json feature is used\nby esbuild to install the correct binary executable for your current platform.`);\n      }\n\n      throw e;\n    }\n  }\n\n  let isYarnPnP = false;\n\n  try {\n    require(\"pnpapi\");\n\n    isYarnPnP = true;\n  } catch (e) {}\n\n  if (isYarnPnP) {\n    const esbuildLibDir = path.dirname(require.resolve(\"esbuild\"));\n    const binTargetPath = path.join(esbuildLibDir, `pnpapi-${pkg}-${path.basename(subpath)}`);\n\n    if (!fs.existsSync(binTargetPath)) {\n      fs.copyFileSync(binPath, binTargetPath);\n      fs.chmodSync(binTargetPath, 493);\n    }\n\n    return {\n      binPath: binTargetPath,\n      isWASM\n    };\n  }\n\n  return {\n    binPath,\n    isWASM\n  };\n} // lib/npm/node.ts\n\n\nvar child_process = require(\"child_process\");\n\nvar crypto = require(\"crypto\");\n\nvar path2 = require(\"path\");\n\nvar fs2 = require(\"fs\");\n\nvar os2 = require(\"os\");\n\nvar tty = require(\"tty\");\n\nvar worker_threads;\n\nif (process.env.ESBUILD_WORKER_THREADS !== \"0\") {\n  try {\n    worker_threads = require(\"worker_threads\");\n  } catch {}\n\n  let [major, minor] = process.versions.node.split(\".\");\n\n  if (+major < 12 || +major === 12 && +minor < 17 || +major === 13 && +minor < 13) {\n    worker_threads = void 0;\n  }\n}\n\nvar _a;\n\nvar isInternalWorkerThread = ((_a = worker_threads == null ? void 0 : worker_threads.workerData) == null ? void 0 : _a.esbuildVersion) === \"0.15.5\";\n\nvar esbuildCommandAndArgs = () => {\n  if ((!ESBUILD_BINARY_PATH || false) && (path2.basename(__filename) !== \"main.js\" || path2.basename(__dirname) !== \"lib\")) {\n    throw new Error(`The esbuild JavaScript API cannot be bundled. Please mark the \"esbuild\" package as external so it's not included in the bundle.\n\nMore information: The file containing the code for esbuild's JavaScript API (${__filename}) does not appear to be inside the esbuild package on the file system, which usually means that the esbuild package was bundled into another file. This is problematic because the API needs to run a binary executable inside the esbuild package which is located using a relative path from the API code to the executable. If the esbuild package is bundled, the relative path will be incorrect and the executable won't be found.`);\n  }\n\n  if (false) {\n    return [\"node\", [path2.join(__dirname, \"..\", \"bin\", \"esbuild\")]];\n  }\n\n  const {\n    binPath,\n    isWASM\n  } = generateBinPath();\n\n  if (isWASM) {\n    return [\"node\", [binPath]];\n  } else {\n    return [binPath, []];\n  }\n};\n\nvar isTTY = () => tty.isatty(2);\n\nvar fsSync = {\n  readFile(tempFile, callback) {\n    try {\n      let contents = fs2.readFileSync(tempFile, \"utf8\");\n\n      try {\n        fs2.unlinkSync(tempFile);\n      } catch {}\n\n      callback(null, contents);\n    } catch (err) {\n      callback(err, null);\n    }\n  },\n\n  writeFile(contents, callback) {\n    try {\n      let tempFile = randomFileName();\n      fs2.writeFileSync(tempFile, contents);\n      callback(tempFile);\n    } catch {\n      callback(null);\n    }\n  }\n\n};\nvar fsAsync = {\n  readFile(tempFile, callback) {\n    try {\n      fs2.readFile(tempFile, \"utf8\", (err, contents) => {\n        try {\n          fs2.unlink(tempFile, () => callback(err, contents));\n        } catch {\n          callback(err, contents);\n        }\n      });\n    } catch (err) {\n      callback(err, null);\n    }\n  },\n\n  writeFile(contents, callback) {\n    try {\n      let tempFile = randomFileName();\n      fs2.writeFile(tempFile, contents, err => err !== null ? callback(null) : callback(tempFile));\n    } catch {\n      callback(null);\n    }\n  }\n\n};\nvar version = \"0.15.5\";\n\nvar build = options => ensureServiceIsRunning().build(options);\n\nvar serve = (serveOptions, buildOptions) => ensureServiceIsRunning().serve(serveOptions, buildOptions);\n\nvar transform = (input, options) => ensureServiceIsRunning().transform(input, options);\n\nvar formatMessages = (messages, options) => ensureServiceIsRunning().formatMessages(messages, options);\n\nvar analyzeMetafile = (messages, options) => ensureServiceIsRunning().analyzeMetafile(messages, options);\n\nvar buildSync = options => {\n  if (worker_threads && !isInternalWorkerThread) {\n    if (!workerThreadService) workerThreadService = startWorkerThreadService(worker_threads);\n    return workerThreadService.buildSync(options);\n  }\n\n  let result;\n  runServiceSync(service => service.buildOrServe({\n    callName: \"buildSync\",\n    refs: null,\n    serveOptions: null,\n    options,\n    isTTY: isTTY(),\n    defaultWD,\n    callback: (err, res) => {\n      if (err) throw err;\n      result = res;\n    }\n  }));\n  return result;\n};\n\nvar transformSync = (input, options) => {\n  if (worker_threads && !isInternalWorkerThread) {\n    if (!workerThreadService) workerThreadService = startWorkerThreadService(worker_threads);\n    return workerThreadService.transformSync(input, options);\n  }\n\n  let result;\n  runServiceSync(service => service.transform({\n    callName: \"transformSync\",\n    refs: null,\n    input,\n    options: options || {},\n    isTTY: isTTY(),\n    fs: fsSync,\n    callback: (err, res) => {\n      if (err) throw err;\n      result = res;\n    }\n  }));\n  return result;\n};\n\nvar formatMessagesSync = (messages, options) => {\n  if (worker_threads && !isInternalWorkerThread) {\n    if (!workerThreadService) workerThreadService = startWorkerThreadService(worker_threads);\n    return workerThreadService.formatMessagesSync(messages, options);\n  }\n\n  let result;\n  runServiceSync(service => service.formatMessages({\n    callName: \"formatMessagesSync\",\n    refs: null,\n    messages,\n    options,\n    callback: (err, res) => {\n      if (err) throw err;\n      result = res;\n    }\n  }));\n  return result;\n};\n\nvar analyzeMetafileSync = (metafile, options) => {\n  if (worker_threads && !isInternalWorkerThread) {\n    if (!workerThreadService) workerThreadService = startWorkerThreadService(worker_threads);\n    return workerThreadService.analyzeMetafileSync(metafile, options);\n  }\n\n  let result;\n  runServiceSync(service => service.analyzeMetafile({\n    callName: \"analyzeMetafileSync\",\n    refs: null,\n    metafile: typeof metafile === \"string\" ? metafile : JSON.stringify(metafile),\n    options,\n    callback: (err, res) => {\n      if (err) throw err;\n      result = res;\n    }\n  }));\n  return result;\n};\n\nvar initializeWasCalled = false;\n\nvar initialize = options => {\n  options = validateInitializeOptions(options || {});\n  if (options.wasmURL) throw new Error(`The \"wasmURL\" option only works in the browser`);\n  if (options.wasmModule) throw new Error(`The \"wasmModule\" option only works in the browser`);\n  if (options.worker) throw new Error(`The \"worker\" option only works in the browser`);\n  if (initializeWasCalled) throw new Error('Cannot call \"initialize\" more than once');\n  ensureServiceIsRunning();\n  initializeWasCalled = true;\n  return Promise.resolve();\n};\n\nvar defaultWD = process.cwd();\nvar longLivedService;\n\nvar ensureServiceIsRunning = () => {\n  if (longLivedService) return longLivedService;\n  let [command, args] = esbuildCommandAndArgs();\n  let child = child_process.spawn(command, args.concat(`--service=${\"0.15.5\"}`, \"--ping\"), {\n    windowsHide: true,\n    stdio: [\"pipe\", \"pipe\", \"inherit\"],\n    cwd: defaultWD\n  });\n  let {\n    readFromStdout,\n    afterClose,\n    service\n  } = createChannel({\n    writeToStdin(bytes) {\n      child.stdin.write(bytes, err => {\n        if (err) afterClose(err);\n      });\n    },\n\n    readFileSync: fs2.readFileSync,\n    isSync: false,\n    isWriteUnavailable: false,\n    esbuild: node_exports\n  });\n  child.stdin.on(\"error\", afterClose);\n  child.on(\"error\", afterClose);\n  const stdin = child.stdin;\n  const stdout = child.stdout;\n  stdout.on(\"data\", readFromStdout);\n  stdout.on(\"end\", afterClose);\n  let refCount = 0;\n  child.unref();\n\n  if (stdin.unref) {\n    stdin.unref();\n  }\n\n  if (stdout.unref) {\n    stdout.unref();\n  }\n\n  const refs = {\n    ref() {\n      if (++refCount === 1) child.ref();\n    },\n\n    unref() {\n      if (--refCount === 0) child.unref();\n    }\n\n  };\n  longLivedService = {\n    build: options => {\n      return new Promise((resolve, reject) => {\n        service.buildOrServe({\n          callName: \"build\",\n          refs,\n          serveOptions: null,\n          options,\n          isTTY: isTTY(),\n          defaultWD,\n          callback: (err, res) => err ? reject(err) : resolve(res)\n        });\n      });\n    },\n    serve: (serveOptions, buildOptions) => {\n      if (serveOptions === null || typeof serveOptions !== \"object\") throw new Error(\"The first argument must be an object\");\n      return new Promise((resolve, reject) => service.buildOrServe({\n        callName: \"serve\",\n        refs,\n        serveOptions,\n        options: buildOptions,\n        isTTY: isTTY(),\n        defaultWD,\n        callback: (err, res) => err ? reject(err) : resolve(res)\n      }));\n    },\n    transform: (input, options) => {\n      return new Promise((resolve, reject) => service.transform({\n        callName: \"transform\",\n        refs,\n        input,\n        options: options || {},\n        isTTY: isTTY(),\n        fs: fsAsync,\n        callback: (err, res) => err ? reject(err) : resolve(res)\n      }));\n    },\n    formatMessages: (messages, options) => {\n      return new Promise((resolve, reject) => service.formatMessages({\n        callName: \"formatMessages\",\n        refs,\n        messages,\n        options,\n        callback: (err, res) => err ? reject(err) : resolve(res)\n      }));\n    },\n    analyzeMetafile: (metafile, options) => {\n      return new Promise((resolve, reject) => service.analyzeMetafile({\n        callName: \"analyzeMetafile\",\n        refs,\n        metafile: typeof metafile === \"string\" ? metafile : JSON.stringify(metafile),\n        options,\n        callback: (err, res) => err ? reject(err) : resolve(res)\n      }));\n    }\n  };\n  return longLivedService;\n};\n\nvar runServiceSync = callback => {\n  let [command, args] = esbuildCommandAndArgs();\n  let stdin = new Uint8Array();\n  let {\n    readFromStdout,\n    afterClose,\n    service\n  } = createChannel({\n    writeToStdin(bytes) {\n      if (stdin.length !== 0) throw new Error(\"Must run at most one command\");\n      stdin = bytes;\n    },\n\n    isSync: true,\n    isWriteUnavailable: false,\n    esbuild: node_exports\n  });\n  callback(service);\n  let stdout = child_process.execFileSync(command, args.concat(`--service=${\"0.15.5\"}`), {\n    cwd: defaultWD,\n    windowsHide: true,\n    input: stdin,\n    maxBuffer: +process.env.ESBUILD_MAX_BUFFER || 16 * 1024 * 1024\n  });\n  readFromStdout(stdout);\n  afterClose(null);\n};\n\nvar randomFileName = () => {\n  return path2.join(os2.tmpdir(), `esbuild-${crypto.randomBytes(32).toString(\"hex\")}`);\n};\n\nvar workerThreadService = null;\n\nvar startWorkerThreadService = worker_threads2 => {\n  let {\n    port1: mainPort,\n    port2: workerPort\n  } = new worker_threads2.MessageChannel();\n  let worker = new worker_threads2.Worker(__filename, {\n    workerData: {\n      workerPort,\n      defaultWD,\n      esbuildVersion: \"0.15.5\"\n    },\n    transferList: [workerPort],\n    execArgv: []\n  });\n  let nextID = 0;\n\n  let fakeBuildError = text => {\n    let error = new Error(`Build failed with 1 error:\nerror: ${text}`);\n    let errors = [{\n      id: \"\",\n      pluginName: \"\",\n      text,\n      location: null,\n      notes: [],\n      detail: void 0\n    }];\n    error.errors = errors;\n    error.warnings = [];\n    return error;\n  };\n\n  let validateBuildSyncOptions = options => {\n    if (!options) return;\n    let plugins = options.plugins;\n    let incremental = options.incremental;\n    let watch = options.watch;\n    if (plugins && plugins.length > 0) throw fakeBuildError(`Cannot use plugins in synchronous API calls`);\n    if (incremental) throw fakeBuildError(`Cannot use \"incremental\" with a synchronous build`);\n    if (watch) throw fakeBuildError(`Cannot use \"watch\" with a synchronous build`);\n  };\n\n  let applyProperties = (object, properties) => {\n    for (let key in properties) {\n      object[key] = properties[key];\n    }\n  };\n\n  let runCallSync = (command, args) => {\n    let id = nextID++;\n    let sharedBuffer = new SharedArrayBuffer(8);\n    let sharedBufferView = new Int32Array(sharedBuffer);\n    let msg = {\n      sharedBuffer,\n      id,\n      command,\n      args\n    };\n    worker.postMessage(msg);\n    let status = Atomics.wait(sharedBufferView, 0, 0);\n    if (status !== \"ok\" && status !== \"not-equal\") throw new Error(\"Internal error: Atomics.wait() failed: \" + status);\n    let {\n      message: {\n        id: id2,\n        resolve,\n        reject,\n        properties\n      }\n    } = worker_threads2.receiveMessageOnPort(mainPort);\n    if (id !== id2) throw new Error(`Internal error: Expected id ${id} but got id ${id2}`);\n\n    if (reject) {\n      applyProperties(reject, properties);\n      throw reject;\n    }\n\n    return resolve;\n  };\n\n  worker.unref();\n  return {\n    buildSync(options) {\n      validateBuildSyncOptions(options);\n      return runCallSync(\"build\", [options]);\n    },\n\n    transformSync(input, options) {\n      return runCallSync(\"transform\", [input, options]);\n    },\n\n    formatMessagesSync(messages, options) {\n      return runCallSync(\"formatMessages\", [messages, options]);\n    },\n\n    analyzeMetafileSync(metafile, options) {\n      return runCallSync(\"analyzeMetafile\", [metafile, options]);\n    }\n\n  };\n};\n\nvar startSyncServiceWorker = () => {\n  let workerPort = worker_threads.workerData.workerPort;\n  let parentPort = worker_threads.parentPort;\n\n  let extractProperties = object => {\n    let properties = {};\n\n    if (object && typeof object === \"object\") {\n      for (let key in object) {\n        properties[key] = object[key];\n      }\n    }\n\n    return properties;\n  };\n\n  try {\n    let service = ensureServiceIsRunning();\n    defaultWD = worker_threads.workerData.defaultWD;\n    parentPort.on(\"message\", msg => {\n      _asyncToGenerator(function* () {\n        let {\n          sharedBuffer,\n          id,\n          command,\n          args\n        } = msg;\n        let sharedBufferView = new Int32Array(sharedBuffer);\n\n        try {\n          switch (command) {\n            case \"build\":\n              workerPort.postMessage({\n                id,\n                resolve: yield service.build(args[0])\n              });\n              break;\n\n            case \"transform\":\n              workerPort.postMessage({\n                id,\n                resolve: yield service.transform(args[0], args[1])\n              });\n              break;\n\n            case \"formatMessages\":\n              workerPort.postMessage({\n                id,\n                resolve: yield service.formatMessages(args[0], args[1])\n              });\n              break;\n\n            case \"analyzeMetafile\":\n              workerPort.postMessage({\n                id,\n                resolve: yield service.analyzeMetafile(args[0], args[1])\n              });\n              break;\n\n            default:\n              throw new Error(`Invalid command: ${command}`);\n          }\n        } catch (reject) {\n          workerPort.postMessage({\n            id,\n            reject,\n            properties: extractProperties(reject)\n          });\n        }\n\n        Atomics.add(sharedBufferView, 0, 1);\n        Atomics.notify(sharedBufferView, 0, Infinity);\n      })();\n    });\n  } catch (reject) {\n    parentPort.on(\"message\", msg => {\n      let {\n        sharedBuffer,\n        id\n      } = msg;\n      let sharedBufferView = new Int32Array(sharedBuffer);\n      workerPort.postMessage({\n        id,\n        reject,\n        properties: extractProperties(reject)\n      });\n      Atomics.add(sharedBufferView, 0, 1);\n      Atomics.notify(sharedBufferView, 0, Infinity);\n    });\n  }\n};\n\nif (isInternalWorkerThread) {\n  startSyncServiceWorker();\n}\n\nvar node_default = node_exports; // Annotate the CommonJS export names for ESM import in node:\n\n0 && (module.exports = {\n  analyzeMetafile,\n  analyzeMetafileSync,\n  build,\n  buildSync,\n  formatMessages,\n  formatMessagesSync,\n  initialize,\n  serve,\n  transform,\n  transformSync,\n  version\n});","map":{"version":3,"names":["__create","Object","create","__defProp","defineProperty","__getOwnPropDesc","getOwnPropertyDescriptor","__getOwnPropNames","getOwnPropertyNames","__getProtoOf","getPrototypeOf","__hasOwnProp","prototype","hasOwnProperty","__export","target","all","name","get","enumerable","__copyProps","to","from","except","desc","key","call","__toESM","mod","isNodeMode","__esModule","value","__toCommonJS","node_exports","analyzeMetafile","analyzeMetafileSync","build","buildSync","default","node_default","formatMessages","formatMessagesSync","initialize","serve","transform","transformSync","version","module","exports","encodePacket","packet","visit","bb","write8","write32","write","encodeUTF8","Uint8Array","Array","length","item","keys","ByteBuffer","id","isRequest","writeUInt32LE","buf","len","subarray","decodePacket","bytes","read8","read32","decodeUTF8","read","count","value2","i","push","Error","ptr","constructor","_write","delta","clone","set","offset","_read","readUInt32LE","TextEncoder","TextDecoder","encoder","decoder","text","encode","decode","Buffer","buffer","byteOffset","byteLength","toString","validateTarget","indexOf","canBeAnything","mustBeBoolean","mustBeBooleanOrObject","isArray","mustBeString","mustBeRegExp","RegExp","mustBeInteger","mustBeFunction","mustBeArray","mustBeObject","mustBeWebAssemblyModule","WebAssembly","Module","mustBeArrayOrRecord","mustBeObjectOrNull","mustBeStringOrBoolean","mustBeStringOrObject","mustBeStringOrArray","mustBeStringOrUint8Array","getFlag","object","mustBeFn","mustBe","checkForInvalidFlags","where","validateInitializeOptions","options","wasmURL","wasmModule","worker","validateMangleCache","mangleCache","validated","JSON","stringify","pushLogFlags","flags","isTTY2","logLevelDefault","color","logLevel","logLimit","pushCommonFlags","legalComments","sourceRoot","sourcesContent","format","globalName","mangleProps","reserveProps","mangleQuoted","minify","minifySyntax","minifyWhitespace","minifyIdentifiers","drop","charset","treeShaking","ignoreAnnotations","jsx","jsxFactory","jsxFragment","jsxImportSource","jsxDev","define","logOverride","supported","pure","keepNames","platform","map","join","what","source","fn","flagsForBuildOptions","callName","writeDefault","_a2","entries","stdinContents","stdinResolveDir","watchMode","sourcemap","bundle","watch","splitting","preserveSymlinks","metafile","outfile","outdir","outbase","tsconfig","resolveExtensions","nodePathsInput","mainFields","conditions","external","loader","outExtension","publicPath","entryNames","chunkNames","assetNames","inject","banner","footer","entryPoints","absWorkingDir","stdin","allowOverwrite","incremental","plugins","watchKeys","onRebuild","values","type","path3","ext","entryPoint","stdinKeys","contents","resolveDir","sourcefile","loader2","nodePaths","flagsForTransformOptions","tsconfigRaw","createChannel","streamIn","responseCallbacks","Map","pluginCallbacks","watchCallbacks","serveCallbacks","closeData","nextRequestID","nextBuildKey","stdout","stdoutUsed","readFromStdout","chunk","limit","swap","handleIncomingPacket","copyWithin","afterClose","error","reason","message","callback","clear","callbacks","onWait","e","console","sendRequest","refs","response","unref","ref","writeToStdin","sendResponse","handleRequest","request","command","onRequest","args","err","errors","extractErrorMessageV8","isFirstPacket","binaryVersion","String","fromCharCode","delete","handlePlugins","initialOptions","buildKey","stash","onStartCallbacks","onEndCallbacks","onResolveCallbacks","onLoadCallbacks","nextCallbackID","requestPlugins","isSetupDone","setup","plugin","onResolve","onLoad","resolve","keys2","pluginName","importer","namespace","kind","pluginData","Promise","resolve2","reject","path","store","replaceDetailsInMessages","warnings","sideEffects","suffix","load","promise","onStart","callback2","registeredText","registeredNote","extractCallerV8","note","onEnd","filter","esbuild","ok","result","sanitizeMessages","ids","watchFiles","watchDirs","sanitizeStringArray","runOnEndCallbacks","logPluginError","done","then","refCount","pluginRefs","buildServeData","port","host","servedir","wait","stop","buildLogLevelDefault","transformLogLevelDefault","buildOrServe","details","createObjectStash","isTTY","detail","handleError","failureErrorWithLog","isSync","buildOrServeContinue","logPluginError2","callerRefs","serveOptions","defaultWD","defaultWD2","isWriteUnavailable","serve2","rebuild","copyResponseToResult","outputFiles","convertOutputFiles","parse","writeToStdout","log","replace","buildResponseToResult","isDisposed","error2","response2","location","notes","error3","result3","dispose","isStopped","serviceStopError","watchResponse","result2","rebuildID","serveResponse","transform2","input","fs","fs3","start","inputPath","inputFS","outstanding","next","code","codeFS","readFile","mapFS","writeFile","formatMessages2","messages","terminalWidth","isWarning","analyzeMetafile2","verbose","service","nextID","ident","tried","lines","stack","split","splice","parseStackLinesV8","at","readFileSync","startsWith","line","slice","match","exec","lineText","column","file","suggestion","summary","pluginText","sanitizeLocation","property","fallbackPluginName","messagesClone","index","notesClone","noteKeys","noteText","noteLocation","binary","require","os","ESBUILD_BINARY_PATH","process","env","knownWindowsPackages","knownUnixlikePackages","knownWebAssemblyFallbackPackages","pkgAndSubpathForCurrentPlatform","pkg","subpath","isWASM","platformKey","arch","endianness","pkgForSomeOtherPlatform","libMainJS","nodeModulesDirectory","dirname","basename","unixKey","existsSync","windowsKey","downloadedBinPath","esbuildLibDir","generateBinPath","binPath","otherPkg","isYarnPnP","binTargetPath","copyFileSync","chmodSync","child_process","crypto","path2","fs2","os2","tty","worker_threads","ESBUILD_WORKER_THREADS","major","minor","versions","node","_a","isInternalWorkerThread","workerData","esbuildVersion","esbuildCommandAndArgs","__filename","__dirname","isatty","fsSync","tempFile","unlinkSync","randomFileName","writeFileSync","fsAsync","unlink","ensureServiceIsRunning","buildOptions","workerThreadService","startWorkerThreadService","runServiceSync","res","initializeWasCalled","cwd","longLivedService","child","spawn","concat","windowsHide","stdio","on","execFileSync","maxBuffer","ESBUILD_MAX_BUFFER","tmpdir","randomBytes","worker_threads2","port1","mainPort","port2","workerPort","MessageChannel","Worker","transferList","execArgv","fakeBuildError","validateBuildSyncOptions","applyProperties","properties","runCallSync","sharedBuffer","SharedArrayBuffer","sharedBufferView","Int32Array","msg","postMessage","status","Atomics","id2","receiveMessageOnPort","startSyncServiceWorker","parentPort","extractProperties","add","notify","Infinity"],"sources":["D:/WebDev/dfproject/gp/node_modules/esbuild/lib/main.js"],"sourcesContent":["\"use strict\";\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// lib/npm/node.ts\nvar node_exports = {};\n__export(node_exports, {\n  analyzeMetafile: () => analyzeMetafile,\n  analyzeMetafileSync: () => analyzeMetafileSync,\n  build: () => build,\n  buildSync: () => buildSync,\n  default: () => node_default,\n  formatMessages: () => formatMessages,\n  formatMessagesSync: () => formatMessagesSync,\n  initialize: () => initialize,\n  serve: () => serve,\n  transform: () => transform,\n  transformSync: () => transformSync,\n  version: () => version\n});\nmodule.exports = __toCommonJS(node_exports);\n\n// lib/shared/stdio_protocol.ts\nfunction encodePacket(packet) {\n  let visit = (value) => {\n    if (value === null) {\n      bb.write8(0);\n    } else if (typeof value === \"boolean\") {\n      bb.write8(1);\n      bb.write8(+value);\n    } else if (typeof value === \"number\") {\n      bb.write8(2);\n      bb.write32(value | 0);\n    } else if (typeof value === \"string\") {\n      bb.write8(3);\n      bb.write(encodeUTF8(value));\n    } else if (value instanceof Uint8Array) {\n      bb.write8(4);\n      bb.write(value);\n    } else if (value instanceof Array) {\n      bb.write8(5);\n      bb.write32(value.length);\n      for (let item of value) {\n        visit(item);\n      }\n    } else {\n      let keys = Object.keys(value);\n      bb.write8(6);\n      bb.write32(keys.length);\n      for (let key of keys) {\n        bb.write(encodeUTF8(key));\n        visit(value[key]);\n      }\n    }\n  };\n  let bb = new ByteBuffer();\n  bb.write32(0);\n  bb.write32(packet.id << 1 | +!packet.isRequest);\n  visit(packet.value);\n  writeUInt32LE(bb.buf, bb.len - 4, 0);\n  return bb.buf.subarray(0, bb.len);\n}\nfunction decodePacket(bytes) {\n  let visit = () => {\n    switch (bb.read8()) {\n      case 0:\n        return null;\n      case 1:\n        return !!bb.read8();\n      case 2:\n        return bb.read32();\n      case 3:\n        return decodeUTF8(bb.read());\n      case 4:\n        return bb.read();\n      case 5: {\n        let count = bb.read32();\n        let value2 = [];\n        for (let i = 0; i < count; i++) {\n          value2.push(visit());\n        }\n        return value2;\n      }\n      case 6: {\n        let count = bb.read32();\n        let value2 = {};\n        for (let i = 0; i < count; i++) {\n          value2[decodeUTF8(bb.read())] = visit();\n        }\n        return value2;\n      }\n      default:\n        throw new Error(\"Invalid packet\");\n    }\n  };\n  let bb = new ByteBuffer(bytes);\n  let id = bb.read32();\n  let isRequest = (id & 1) === 0;\n  id >>>= 1;\n  let value = visit();\n  if (bb.ptr !== bytes.length) {\n    throw new Error(\"Invalid packet\");\n  }\n  return { id, isRequest, value };\n}\nvar ByteBuffer = class {\n  constructor(buf = new Uint8Array(1024)) {\n    this.buf = buf;\n    this.len = 0;\n    this.ptr = 0;\n  }\n  _write(delta) {\n    if (this.len + delta > this.buf.length) {\n      let clone = new Uint8Array((this.len + delta) * 2);\n      clone.set(this.buf);\n      this.buf = clone;\n    }\n    this.len += delta;\n    return this.len - delta;\n  }\n  write8(value) {\n    let offset = this._write(1);\n    this.buf[offset] = value;\n  }\n  write32(value) {\n    let offset = this._write(4);\n    writeUInt32LE(this.buf, value, offset);\n  }\n  write(bytes) {\n    let offset = this._write(4 + bytes.length);\n    writeUInt32LE(this.buf, bytes.length, offset);\n    this.buf.set(bytes, offset + 4);\n  }\n  _read(delta) {\n    if (this.ptr + delta > this.buf.length) {\n      throw new Error(\"Invalid packet\");\n    }\n    this.ptr += delta;\n    return this.ptr - delta;\n  }\n  read8() {\n    return this.buf[this._read(1)];\n  }\n  read32() {\n    return readUInt32LE(this.buf, this._read(4));\n  }\n  read() {\n    let length = this.read32();\n    let bytes = new Uint8Array(length);\n    let ptr = this._read(bytes.length);\n    bytes.set(this.buf.subarray(ptr, ptr + length));\n    return bytes;\n  }\n};\nvar encodeUTF8;\nvar decodeUTF8;\nif (typeof TextEncoder !== \"undefined\" && typeof TextDecoder !== \"undefined\") {\n  let encoder = new TextEncoder();\n  let decoder = new TextDecoder();\n  encodeUTF8 = (text) => encoder.encode(text);\n  decodeUTF8 = (bytes) => decoder.decode(bytes);\n} else if (typeof Buffer !== \"undefined\") {\n  encodeUTF8 = (text) => {\n    let buffer = Buffer.from(text);\n    if (!(buffer instanceof Uint8Array)) {\n      buffer = new Uint8Array(buffer);\n    }\n    return buffer;\n  };\n  decodeUTF8 = (bytes) => {\n    let { buffer, byteOffset, byteLength } = bytes;\n    return Buffer.from(buffer, byteOffset, byteLength).toString();\n  };\n} else {\n  throw new Error(\"No UTF-8 codec found\");\n}\nfunction readUInt32LE(buffer, offset) {\n  return buffer[offset++] | buffer[offset++] << 8 | buffer[offset++] << 16 | buffer[offset++] << 24;\n}\nfunction writeUInt32LE(buffer, value, offset) {\n  buffer[offset++] = value;\n  buffer[offset++] = value >> 8;\n  buffer[offset++] = value >> 16;\n  buffer[offset++] = value >> 24;\n}\n\n// lib/shared/common.ts\nfunction validateTarget(target) {\n  target += \"\";\n  if (target.indexOf(\",\") >= 0)\n    throw new Error(`Invalid target: ${target}`);\n  return target;\n}\nvar canBeAnything = () => null;\nvar mustBeBoolean = (value) => typeof value === \"boolean\" ? null : \"a boolean\";\nvar mustBeBooleanOrObject = (value) => typeof value === \"boolean\" || typeof value === \"object\" && !Array.isArray(value) ? null : \"a boolean or an object\";\nvar mustBeString = (value) => typeof value === \"string\" ? null : \"a string\";\nvar mustBeRegExp = (value) => value instanceof RegExp ? null : \"a RegExp object\";\nvar mustBeInteger = (value) => typeof value === \"number\" && value === (value | 0) ? null : \"an integer\";\nvar mustBeFunction = (value) => typeof value === \"function\" ? null : \"a function\";\nvar mustBeArray = (value) => Array.isArray(value) ? null : \"an array\";\nvar mustBeObject = (value) => typeof value === \"object\" && value !== null && !Array.isArray(value) ? null : \"an object\";\nvar mustBeWebAssemblyModule = (value) => value instanceof WebAssembly.Module ? null : \"a WebAssembly.Module\";\nvar mustBeArrayOrRecord = (value) => typeof value === \"object\" && value !== null ? null : \"an array or an object\";\nvar mustBeObjectOrNull = (value) => typeof value === \"object\" && !Array.isArray(value) ? null : \"an object or null\";\nvar mustBeStringOrBoolean = (value) => typeof value === \"string\" || typeof value === \"boolean\" ? null : \"a string or a boolean\";\nvar mustBeStringOrObject = (value) => typeof value === \"string\" || typeof value === \"object\" && value !== null && !Array.isArray(value) ? null : \"a string or an object\";\nvar mustBeStringOrArray = (value) => typeof value === \"string\" || Array.isArray(value) ? null : \"a string or an array\";\nvar mustBeStringOrUint8Array = (value) => typeof value === \"string\" || value instanceof Uint8Array ? null : \"a string or a Uint8Array\";\nfunction getFlag(object, keys, key, mustBeFn) {\n  let value = object[key];\n  keys[key + \"\"] = true;\n  if (value === void 0)\n    return void 0;\n  let mustBe = mustBeFn(value);\n  if (mustBe !== null)\n    throw new Error(`\"${key}\" must be ${mustBe}`);\n  return value;\n}\nfunction checkForInvalidFlags(object, keys, where) {\n  for (let key in object) {\n    if (!(key in keys)) {\n      throw new Error(`Invalid option ${where}: \"${key}\"`);\n    }\n  }\n}\nfunction validateInitializeOptions(options) {\n  let keys = /* @__PURE__ */ Object.create(null);\n  let wasmURL = getFlag(options, keys, \"wasmURL\", mustBeString);\n  let wasmModule = getFlag(options, keys, \"wasmModule\", mustBeWebAssemblyModule);\n  let worker = getFlag(options, keys, \"worker\", mustBeBoolean);\n  checkForInvalidFlags(options, keys, \"in initialize() call\");\n  return {\n    wasmURL,\n    wasmModule,\n    worker\n  };\n}\nfunction validateMangleCache(mangleCache) {\n  let validated;\n  if (mangleCache !== void 0) {\n    validated = /* @__PURE__ */ Object.create(null);\n    for (let key of Object.keys(mangleCache)) {\n      let value = mangleCache[key];\n      if (typeof value === \"string\" || value === false) {\n        validated[key] = value;\n      } else {\n        throw new Error(`Expected ${JSON.stringify(key)} in mangle cache to map to either a string or false`);\n      }\n    }\n  }\n  return validated;\n}\nfunction pushLogFlags(flags, options, keys, isTTY2, logLevelDefault) {\n  let color = getFlag(options, keys, \"color\", mustBeBoolean);\n  let logLevel = getFlag(options, keys, \"logLevel\", mustBeString);\n  let logLimit = getFlag(options, keys, \"logLimit\", mustBeInteger);\n  if (color !== void 0)\n    flags.push(`--color=${color}`);\n  else if (isTTY2)\n    flags.push(`--color=true`);\n  flags.push(`--log-level=${logLevel || logLevelDefault}`);\n  flags.push(`--log-limit=${logLimit || 0}`);\n}\nfunction pushCommonFlags(flags, options, keys) {\n  let legalComments = getFlag(options, keys, \"legalComments\", mustBeString);\n  let sourceRoot = getFlag(options, keys, \"sourceRoot\", mustBeString);\n  let sourcesContent = getFlag(options, keys, \"sourcesContent\", mustBeBoolean);\n  let target = getFlag(options, keys, \"target\", mustBeStringOrArray);\n  let format = getFlag(options, keys, \"format\", mustBeString);\n  let globalName = getFlag(options, keys, \"globalName\", mustBeString);\n  let mangleProps = getFlag(options, keys, \"mangleProps\", mustBeRegExp);\n  let reserveProps = getFlag(options, keys, \"reserveProps\", mustBeRegExp);\n  let mangleQuoted = getFlag(options, keys, \"mangleQuoted\", mustBeBoolean);\n  let minify = getFlag(options, keys, \"minify\", mustBeBoolean);\n  let minifySyntax = getFlag(options, keys, \"minifySyntax\", mustBeBoolean);\n  let minifyWhitespace = getFlag(options, keys, \"minifyWhitespace\", mustBeBoolean);\n  let minifyIdentifiers = getFlag(options, keys, \"minifyIdentifiers\", mustBeBoolean);\n  let drop = getFlag(options, keys, \"drop\", mustBeArray);\n  let charset = getFlag(options, keys, \"charset\", mustBeString);\n  let treeShaking = getFlag(options, keys, \"treeShaking\", mustBeBoolean);\n  let ignoreAnnotations = getFlag(options, keys, \"ignoreAnnotations\", mustBeBoolean);\n  let jsx = getFlag(options, keys, \"jsx\", mustBeString);\n  let jsxFactory = getFlag(options, keys, \"jsxFactory\", mustBeString);\n  let jsxFragment = getFlag(options, keys, \"jsxFragment\", mustBeString);\n  let jsxImportSource = getFlag(options, keys, \"jsxImportSource\", mustBeString);\n  let jsxDev = getFlag(options, keys, \"jsxDev\", mustBeBoolean);\n  let define = getFlag(options, keys, \"define\", mustBeObject);\n  let logOverride = getFlag(options, keys, \"logOverride\", mustBeObject);\n  let supported = getFlag(options, keys, \"supported\", mustBeObject);\n  let pure = getFlag(options, keys, \"pure\", mustBeArray);\n  let keepNames = getFlag(options, keys, \"keepNames\", mustBeBoolean);\n  let platform = getFlag(options, keys, \"platform\", mustBeString);\n  if (legalComments)\n    flags.push(`--legal-comments=${legalComments}`);\n  if (sourceRoot !== void 0)\n    flags.push(`--source-root=${sourceRoot}`);\n  if (sourcesContent !== void 0)\n    flags.push(`--sources-content=${sourcesContent}`);\n  if (target) {\n    if (Array.isArray(target))\n      flags.push(`--target=${Array.from(target).map(validateTarget).join(\",\")}`);\n    else\n      flags.push(`--target=${validateTarget(target)}`);\n  }\n  if (format)\n    flags.push(`--format=${format}`);\n  if (globalName)\n    flags.push(`--global-name=${globalName}`);\n  if (platform)\n    flags.push(`--platform=${platform}`);\n  if (minify)\n    flags.push(\"--minify\");\n  if (minifySyntax)\n    flags.push(\"--minify-syntax\");\n  if (minifyWhitespace)\n    flags.push(\"--minify-whitespace\");\n  if (minifyIdentifiers)\n    flags.push(\"--minify-identifiers\");\n  if (charset)\n    flags.push(`--charset=${charset}`);\n  if (treeShaking !== void 0)\n    flags.push(`--tree-shaking=${treeShaking}`);\n  if (ignoreAnnotations)\n    flags.push(`--ignore-annotations`);\n  if (drop)\n    for (let what of drop)\n      flags.push(`--drop:${what}`);\n  if (mangleProps)\n    flags.push(`--mangle-props=${mangleProps.source}`);\n  if (reserveProps)\n    flags.push(`--reserve-props=${reserveProps.source}`);\n  if (mangleQuoted !== void 0)\n    flags.push(`--mangle-quoted=${mangleQuoted}`);\n  if (jsx)\n    flags.push(`--jsx=${jsx}`);\n  if (jsxFactory)\n    flags.push(`--jsx-factory=${jsxFactory}`);\n  if (jsxFragment)\n    flags.push(`--jsx-fragment=${jsxFragment}`);\n  if (jsxImportSource)\n    flags.push(`--jsx-import-source=${jsxImportSource}`);\n  if (jsxDev)\n    flags.push(`--jsx-dev`);\n  if (define) {\n    for (let key in define) {\n      if (key.indexOf(\"=\") >= 0)\n        throw new Error(`Invalid define: ${key}`);\n      flags.push(`--define:${key}=${define[key]}`);\n    }\n  }\n  if (logOverride) {\n    for (let key in logOverride) {\n      if (key.indexOf(\"=\") >= 0)\n        throw new Error(`Invalid log override: ${key}`);\n      flags.push(`--log-override:${key}=${logOverride[key]}`);\n    }\n  }\n  if (supported) {\n    for (let key in supported) {\n      if (key.indexOf(\"=\") >= 0)\n        throw new Error(`Invalid supported: ${key}`);\n      flags.push(`--supported:${key}=${supported[key]}`);\n    }\n  }\n  if (pure)\n    for (let fn of pure)\n      flags.push(`--pure:${fn}`);\n  if (keepNames)\n    flags.push(`--keep-names`);\n}\nfunction flagsForBuildOptions(callName, options, isTTY2, logLevelDefault, writeDefault) {\n  var _a2;\n  let flags = [];\n  let entries = [];\n  let keys = /* @__PURE__ */ Object.create(null);\n  let stdinContents = null;\n  let stdinResolveDir = null;\n  let watchMode = null;\n  pushLogFlags(flags, options, keys, isTTY2, logLevelDefault);\n  pushCommonFlags(flags, options, keys);\n  let sourcemap = getFlag(options, keys, \"sourcemap\", mustBeStringOrBoolean);\n  let bundle = getFlag(options, keys, \"bundle\", mustBeBoolean);\n  let watch = getFlag(options, keys, \"watch\", mustBeBooleanOrObject);\n  let splitting = getFlag(options, keys, \"splitting\", mustBeBoolean);\n  let preserveSymlinks = getFlag(options, keys, \"preserveSymlinks\", mustBeBoolean);\n  let metafile = getFlag(options, keys, \"metafile\", mustBeBoolean);\n  let outfile = getFlag(options, keys, \"outfile\", mustBeString);\n  let outdir = getFlag(options, keys, \"outdir\", mustBeString);\n  let outbase = getFlag(options, keys, \"outbase\", mustBeString);\n  let tsconfig = getFlag(options, keys, \"tsconfig\", mustBeString);\n  let resolveExtensions = getFlag(options, keys, \"resolveExtensions\", mustBeArray);\n  let nodePathsInput = getFlag(options, keys, \"nodePaths\", mustBeArray);\n  let mainFields = getFlag(options, keys, \"mainFields\", mustBeArray);\n  let conditions = getFlag(options, keys, \"conditions\", mustBeArray);\n  let external = getFlag(options, keys, \"external\", mustBeArray);\n  let loader = getFlag(options, keys, \"loader\", mustBeObject);\n  let outExtension = getFlag(options, keys, \"outExtension\", mustBeObject);\n  let publicPath = getFlag(options, keys, \"publicPath\", mustBeString);\n  let entryNames = getFlag(options, keys, \"entryNames\", mustBeString);\n  let chunkNames = getFlag(options, keys, \"chunkNames\", mustBeString);\n  let assetNames = getFlag(options, keys, \"assetNames\", mustBeString);\n  let inject = getFlag(options, keys, \"inject\", mustBeArray);\n  let banner = getFlag(options, keys, \"banner\", mustBeObject);\n  let footer = getFlag(options, keys, \"footer\", mustBeObject);\n  let entryPoints = getFlag(options, keys, \"entryPoints\", mustBeArrayOrRecord);\n  let absWorkingDir = getFlag(options, keys, \"absWorkingDir\", mustBeString);\n  let stdin = getFlag(options, keys, \"stdin\", mustBeObject);\n  let write = (_a2 = getFlag(options, keys, \"write\", mustBeBoolean)) != null ? _a2 : writeDefault;\n  let allowOverwrite = getFlag(options, keys, \"allowOverwrite\", mustBeBoolean);\n  let incremental = getFlag(options, keys, \"incremental\", mustBeBoolean) === true;\n  let mangleCache = getFlag(options, keys, \"mangleCache\", mustBeObject);\n  keys.plugins = true;\n  checkForInvalidFlags(options, keys, `in ${callName}() call`);\n  if (sourcemap)\n    flags.push(`--sourcemap${sourcemap === true ? \"\" : `=${sourcemap}`}`);\n  if (bundle)\n    flags.push(\"--bundle\");\n  if (allowOverwrite)\n    flags.push(\"--allow-overwrite\");\n  if (watch) {\n    flags.push(\"--watch\");\n    if (typeof watch === \"boolean\") {\n      watchMode = {};\n    } else {\n      let watchKeys = /* @__PURE__ */ Object.create(null);\n      let onRebuild = getFlag(watch, watchKeys, \"onRebuild\", mustBeFunction);\n      checkForInvalidFlags(watch, watchKeys, `on \"watch\" in ${callName}() call`);\n      watchMode = { onRebuild };\n    }\n  }\n  if (splitting)\n    flags.push(\"--splitting\");\n  if (preserveSymlinks)\n    flags.push(\"--preserve-symlinks\");\n  if (metafile)\n    flags.push(`--metafile`);\n  if (outfile)\n    flags.push(`--outfile=${outfile}`);\n  if (outdir)\n    flags.push(`--outdir=${outdir}`);\n  if (outbase)\n    flags.push(`--outbase=${outbase}`);\n  if (tsconfig)\n    flags.push(`--tsconfig=${tsconfig}`);\n  if (resolveExtensions) {\n    let values = [];\n    for (let value of resolveExtensions) {\n      value += \"\";\n      if (value.indexOf(\",\") >= 0)\n        throw new Error(`Invalid resolve extension: ${value}`);\n      values.push(value);\n    }\n    flags.push(`--resolve-extensions=${values.join(\",\")}`);\n  }\n  if (publicPath)\n    flags.push(`--public-path=${publicPath}`);\n  if (entryNames)\n    flags.push(`--entry-names=${entryNames}`);\n  if (chunkNames)\n    flags.push(`--chunk-names=${chunkNames}`);\n  if (assetNames)\n    flags.push(`--asset-names=${assetNames}`);\n  if (mainFields) {\n    let values = [];\n    for (let value of mainFields) {\n      value += \"\";\n      if (value.indexOf(\",\") >= 0)\n        throw new Error(`Invalid main field: ${value}`);\n      values.push(value);\n    }\n    flags.push(`--main-fields=${values.join(\",\")}`);\n  }\n  if (conditions) {\n    let values = [];\n    for (let value of conditions) {\n      value += \"\";\n      if (value.indexOf(\",\") >= 0)\n        throw new Error(`Invalid condition: ${value}`);\n      values.push(value);\n    }\n    flags.push(`--conditions=${values.join(\",\")}`);\n  }\n  if (external)\n    for (let name of external)\n      flags.push(`--external:${name}`);\n  if (banner) {\n    for (let type in banner) {\n      if (type.indexOf(\"=\") >= 0)\n        throw new Error(`Invalid banner file type: ${type}`);\n      flags.push(`--banner:${type}=${banner[type]}`);\n    }\n  }\n  if (footer) {\n    for (let type in footer) {\n      if (type.indexOf(\"=\") >= 0)\n        throw new Error(`Invalid footer file type: ${type}`);\n      flags.push(`--footer:${type}=${footer[type]}`);\n    }\n  }\n  if (inject)\n    for (let path3 of inject)\n      flags.push(`--inject:${path3}`);\n  if (loader) {\n    for (let ext in loader) {\n      if (ext.indexOf(\"=\") >= 0)\n        throw new Error(`Invalid loader extension: ${ext}`);\n      flags.push(`--loader:${ext}=${loader[ext]}`);\n    }\n  }\n  if (outExtension) {\n    for (let ext in outExtension) {\n      if (ext.indexOf(\"=\") >= 0)\n        throw new Error(`Invalid out extension: ${ext}`);\n      flags.push(`--out-extension:${ext}=${outExtension[ext]}`);\n    }\n  }\n  if (entryPoints) {\n    if (Array.isArray(entryPoints)) {\n      for (let entryPoint of entryPoints) {\n        entries.push([\"\", entryPoint + \"\"]);\n      }\n    } else {\n      for (let [key, value] of Object.entries(entryPoints)) {\n        entries.push([key + \"\", value + \"\"]);\n      }\n    }\n  }\n  if (stdin) {\n    let stdinKeys = /* @__PURE__ */ Object.create(null);\n    let contents = getFlag(stdin, stdinKeys, \"contents\", mustBeStringOrUint8Array);\n    let resolveDir = getFlag(stdin, stdinKeys, \"resolveDir\", mustBeString);\n    let sourcefile = getFlag(stdin, stdinKeys, \"sourcefile\", mustBeString);\n    let loader2 = getFlag(stdin, stdinKeys, \"loader\", mustBeString);\n    checkForInvalidFlags(stdin, stdinKeys, 'in \"stdin\" object');\n    if (sourcefile)\n      flags.push(`--sourcefile=${sourcefile}`);\n    if (loader2)\n      flags.push(`--loader=${loader2}`);\n    if (resolveDir)\n      stdinResolveDir = resolveDir + \"\";\n    if (typeof contents === \"string\")\n      stdinContents = encodeUTF8(contents);\n    else if (contents instanceof Uint8Array)\n      stdinContents = contents;\n  }\n  let nodePaths = [];\n  if (nodePathsInput) {\n    for (let value of nodePathsInput) {\n      value += \"\";\n      nodePaths.push(value);\n    }\n  }\n  return {\n    entries,\n    flags,\n    write,\n    stdinContents,\n    stdinResolveDir,\n    absWorkingDir,\n    incremental,\n    nodePaths,\n    watch: watchMode,\n    mangleCache: validateMangleCache(mangleCache)\n  };\n}\nfunction flagsForTransformOptions(callName, options, isTTY2, logLevelDefault) {\n  let flags = [];\n  let keys = /* @__PURE__ */ Object.create(null);\n  pushLogFlags(flags, options, keys, isTTY2, logLevelDefault);\n  pushCommonFlags(flags, options, keys);\n  let sourcemap = getFlag(options, keys, \"sourcemap\", mustBeStringOrBoolean);\n  let tsconfigRaw = getFlag(options, keys, \"tsconfigRaw\", mustBeStringOrObject);\n  let sourcefile = getFlag(options, keys, \"sourcefile\", mustBeString);\n  let loader = getFlag(options, keys, \"loader\", mustBeString);\n  let banner = getFlag(options, keys, \"banner\", mustBeString);\n  let footer = getFlag(options, keys, \"footer\", mustBeString);\n  let mangleCache = getFlag(options, keys, \"mangleCache\", mustBeObject);\n  checkForInvalidFlags(options, keys, `in ${callName}() call`);\n  if (sourcemap)\n    flags.push(`--sourcemap=${sourcemap === true ? \"external\" : sourcemap}`);\n  if (tsconfigRaw)\n    flags.push(`--tsconfig-raw=${typeof tsconfigRaw === \"string\" ? tsconfigRaw : JSON.stringify(tsconfigRaw)}`);\n  if (sourcefile)\n    flags.push(`--sourcefile=${sourcefile}`);\n  if (loader)\n    flags.push(`--loader=${loader}`);\n  if (banner)\n    flags.push(`--banner=${banner}`);\n  if (footer)\n    flags.push(`--footer=${footer}`);\n  return {\n    flags,\n    mangleCache: validateMangleCache(mangleCache)\n  };\n}\nfunction createChannel(streamIn) {\n  let responseCallbacks = /* @__PURE__ */ new Map();\n  let pluginCallbacks = /* @__PURE__ */ new Map();\n  let watchCallbacks = /* @__PURE__ */ new Map();\n  let serveCallbacks = /* @__PURE__ */ new Map();\n  let closeData = null;\n  let nextRequestID = 0;\n  let nextBuildKey = 0;\n  let stdout = new Uint8Array(16 * 1024);\n  let stdoutUsed = 0;\n  let readFromStdout = (chunk) => {\n    let limit = stdoutUsed + chunk.length;\n    if (limit > stdout.length) {\n      let swap = new Uint8Array(limit * 2);\n      swap.set(stdout);\n      stdout = swap;\n    }\n    stdout.set(chunk, stdoutUsed);\n    stdoutUsed += chunk.length;\n    let offset = 0;\n    while (offset + 4 <= stdoutUsed) {\n      let length = readUInt32LE(stdout, offset);\n      if (offset + 4 + length > stdoutUsed) {\n        break;\n      }\n      offset += 4;\n      handleIncomingPacket(stdout.subarray(offset, offset + length));\n      offset += length;\n    }\n    if (offset > 0) {\n      stdout.copyWithin(0, offset, stdoutUsed);\n      stdoutUsed -= offset;\n    }\n  };\n  let afterClose = (error) => {\n    closeData = { reason: error ? \": \" + (error.message || error) : \"\" };\n    const text = \"The service was stopped\" + closeData.reason;\n    for (let callback of responseCallbacks.values()) {\n      callback(text, null);\n    }\n    responseCallbacks.clear();\n    for (let callbacks of serveCallbacks.values()) {\n      callbacks.onWait(text);\n    }\n    serveCallbacks.clear();\n    for (let callback of watchCallbacks.values()) {\n      try {\n        callback(new Error(text), null);\n      } catch (e) {\n        console.error(e);\n      }\n    }\n    watchCallbacks.clear();\n  };\n  let sendRequest = (refs, value, callback) => {\n    if (closeData)\n      return callback(\"The service is no longer running\" + closeData.reason, null);\n    let id = nextRequestID++;\n    responseCallbacks.set(id, (error, response) => {\n      try {\n        callback(error, response);\n      } finally {\n        if (refs)\n          refs.unref();\n      }\n    });\n    if (refs)\n      refs.ref();\n    streamIn.writeToStdin(encodePacket({ id, isRequest: true, value }));\n  };\n  let sendResponse = (id, value) => {\n    if (closeData)\n      throw new Error(\"The service is no longer running\" + closeData.reason);\n    streamIn.writeToStdin(encodePacket({ id, isRequest: false, value }));\n  };\n  let handleRequest = async (id, request) => {\n    try {\n      switch (request.command) {\n        case \"ping\": {\n          sendResponse(id, {});\n          break;\n        }\n        case \"on-start\": {\n          let callback = pluginCallbacks.get(request.key);\n          if (!callback)\n            sendResponse(id, {});\n          else\n            sendResponse(id, await callback(request));\n          break;\n        }\n        case \"on-resolve\": {\n          let callback = pluginCallbacks.get(request.key);\n          if (!callback)\n            sendResponse(id, {});\n          else\n            sendResponse(id, await callback(request));\n          break;\n        }\n        case \"on-load\": {\n          let callback = pluginCallbacks.get(request.key);\n          if (!callback)\n            sendResponse(id, {});\n          else\n            sendResponse(id, await callback(request));\n          break;\n        }\n        case \"serve-request\": {\n          let callbacks = serveCallbacks.get(request.key);\n          if (callbacks && callbacks.onRequest)\n            callbacks.onRequest(request.args);\n          sendResponse(id, {});\n          break;\n        }\n        case \"serve-wait\": {\n          let callbacks = serveCallbacks.get(request.key);\n          if (callbacks)\n            callbacks.onWait(request.error);\n          sendResponse(id, {});\n          break;\n        }\n        case \"watch-rebuild\": {\n          let callback = watchCallbacks.get(request.key);\n          try {\n            if (callback)\n              callback(null, request.args);\n          } catch (err) {\n            console.error(err);\n          }\n          sendResponse(id, {});\n          break;\n        }\n        default:\n          throw new Error(`Invalid command: ` + request.command);\n      }\n    } catch (e) {\n      sendResponse(id, { errors: [extractErrorMessageV8(e, streamIn, null, void 0, \"\")] });\n    }\n  };\n  let isFirstPacket = true;\n  let handleIncomingPacket = (bytes) => {\n    if (isFirstPacket) {\n      isFirstPacket = false;\n      let binaryVersion = String.fromCharCode(...bytes);\n      if (binaryVersion !== \"0.15.5\") {\n        throw new Error(`Cannot start service: Host version \"${\"0.15.5\"}\" does not match binary version ${JSON.stringify(binaryVersion)}`);\n      }\n      return;\n    }\n    let packet = decodePacket(bytes);\n    if (packet.isRequest) {\n      handleRequest(packet.id, packet.value);\n    } else {\n      let callback = responseCallbacks.get(packet.id);\n      responseCallbacks.delete(packet.id);\n      if (packet.value.error)\n        callback(packet.value.error, {});\n      else\n        callback(null, packet.value);\n    }\n  };\n  let handlePlugins = async (initialOptions, plugins, buildKey, stash, refs) => {\n    let onStartCallbacks = [];\n    let onEndCallbacks = [];\n    let onResolveCallbacks = {};\n    let onLoadCallbacks = {};\n    let nextCallbackID = 0;\n    let i = 0;\n    let requestPlugins = [];\n    let isSetupDone = false;\n    plugins = [...plugins];\n    for (let item of plugins) {\n      let keys = {};\n      if (typeof item !== \"object\")\n        throw new Error(`Plugin at index ${i} must be an object`);\n      const name = getFlag(item, keys, \"name\", mustBeString);\n      if (typeof name !== \"string\" || name === \"\")\n        throw new Error(`Plugin at index ${i} is missing a name`);\n      try {\n        let setup = getFlag(item, keys, \"setup\", mustBeFunction);\n        if (typeof setup !== \"function\")\n          throw new Error(`Plugin is missing a setup function`);\n        checkForInvalidFlags(item, keys, `on plugin ${JSON.stringify(name)}`);\n        let plugin = {\n          name,\n          onResolve: [],\n          onLoad: []\n        };\n        i++;\n        let resolve = (path3, options = {}) => {\n          if (!isSetupDone)\n            throw new Error('Cannot call \"resolve\" before plugin setup has completed');\n          if (typeof path3 !== \"string\")\n            throw new Error(`The path to resolve must be a string`);\n          let keys2 = /* @__PURE__ */ Object.create(null);\n          let pluginName = getFlag(options, keys2, \"pluginName\", mustBeString);\n          let importer = getFlag(options, keys2, \"importer\", mustBeString);\n          let namespace = getFlag(options, keys2, \"namespace\", mustBeString);\n          let resolveDir = getFlag(options, keys2, \"resolveDir\", mustBeString);\n          let kind = getFlag(options, keys2, \"kind\", mustBeString);\n          let pluginData = getFlag(options, keys2, \"pluginData\", canBeAnything);\n          checkForInvalidFlags(options, keys2, \"in resolve() call\");\n          return new Promise((resolve2, reject) => {\n            const request = {\n              command: \"resolve\",\n              path: path3,\n              key: buildKey,\n              pluginName: name\n            };\n            if (pluginName != null)\n              request.pluginName = pluginName;\n            if (importer != null)\n              request.importer = importer;\n            if (namespace != null)\n              request.namespace = namespace;\n            if (resolveDir != null)\n              request.resolveDir = resolveDir;\n            if (kind != null)\n              request.kind = kind;\n            if (pluginData != null)\n              request.pluginData = stash.store(pluginData);\n            sendRequest(refs, request, (error, response) => {\n              if (error !== null)\n                reject(new Error(error));\n              else\n                resolve2({\n                  errors: replaceDetailsInMessages(response.errors, stash),\n                  warnings: replaceDetailsInMessages(response.warnings, stash),\n                  path: response.path,\n                  external: response.external,\n                  sideEffects: response.sideEffects,\n                  namespace: response.namespace,\n                  suffix: response.suffix,\n                  pluginData: stash.load(response.pluginData)\n                });\n            });\n          });\n        };\n        let promise = setup({\n          initialOptions,\n          resolve,\n          onStart(callback2) {\n            let registeredText = `This error came from the \"onStart\" callback registered here:`;\n            let registeredNote = extractCallerV8(new Error(registeredText), streamIn, \"onStart\");\n            onStartCallbacks.push({ name, callback: callback2, note: registeredNote });\n          },\n          onEnd(callback2) {\n            let registeredText = `This error came from the \"onEnd\" callback registered here:`;\n            let registeredNote = extractCallerV8(new Error(registeredText), streamIn, \"onEnd\");\n            onEndCallbacks.push({ name, callback: callback2, note: registeredNote });\n          },\n          onResolve(options, callback2) {\n            let registeredText = `This error came from the \"onResolve\" callback registered here:`;\n            let registeredNote = extractCallerV8(new Error(registeredText), streamIn, \"onResolve\");\n            let keys2 = {};\n            let filter = getFlag(options, keys2, \"filter\", mustBeRegExp);\n            let namespace = getFlag(options, keys2, \"namespace\", mustBeString);\n            checkForInvalidFlags(options, keys2, `in onResolve() call for plugin ${JSON.stringify(name)}`);\n            if (filter == null)\n              throw new Error(`onResolve() call is missing a filter`);\n            let id = nextCallbackID++;\n            onResolveCallbacks[id] = { name, callback: callback2, note: registeredNote };\n            plugin.onResolve.push({ id, filter: filter.source, namespace: namespace || \"\" });\n          },\n          onLoad(options, callback2) {\n            let registeredText = `This error came from the \"onLoad\" callback registered here:`;\n            let registeredNote = extractCallerV8(new Error(registeredText), streamIn, \"onLoad\");\n            let keys2 = {};\n            let filter = getFlag(options, keys2, \"filter\", mustBeRegExp);\n            let namespace = getFlag(options, keys2, \"namespace\", mustBeString);\n            checkForInvalidFlags(options, keys2, `in onLoad() call for plugin ${JSON.stringify(name)}`);\n            if (filter == null)\n              throw new Error(`onLoad() call is missing a filter`);\n            let id = nextCallbackID++;\n            onLoadCallbacks[id] = { name, callback: callback2, note: registeredNote };\n            plugin.onLoad.push({ id, filter: filter.source, namespace: namespace || \"\" });\n          },\n          esbuild: streamIn.esbuild\n        });\n        if (promise)\n          await promise;\n        requestPlugins.push(plugin);\n      } catch (e) {\n        return { ok: false, error: e, pluginName: name };\n      }\n    }\n    const callback = async (request) => {\n      switch (request.command) {\n        case \"on-start\": {\n          let response = { errors: [], warnings: [] };\n          await Promise.all(onStartCallbacks.map(async ({ name, callback: callback2, note }) => {\n            try {\n              let result = await callback2();\n              if (result != null) {\n                if (typeof result !== \"object\")\n                  throw new Error(`Expected onStart() callback in plugin ${JSON.stringify(name)} to return an object`);\n                let keys = {};\n                let errors = getFlag(result, keys, \"errors\", mustBeArray);\n                let warnings = getFlag(result, keys, \"warnings\", mustBeArray);\n                checkForInvalidFlags(result, keys, `from onStart() callback in plugin ${JSON.stringify(name)}`);\n                if (errors != null)\n                  response.errors.push(...sanitizeMessages(errors, \"errors\", stash, name));\n                if (warnings != null)\n                  response.warnings.push(...sanitizeMessages(warnings, \"warnings\", stash, name));\n              }\n            } catch (e) {\n              response.errors.push(extractErrorMessageV8(e, streamIn, stash, note && note(), name));\n            }\n          }));\n          return response;\n        }\n        case \"on-resolve\": {\n          let response = {}, name = \"\", callback2, note;\n          for (let id of request.ids) {\n            try {\n              ({ name, callback: callback2, note } = onResolveCallbacks[id]);\n              let result = await callback2({\n                path: request.path,\n                importer: request.importer,\n                namespace: request.namespace,\n                resolveDir: request.resolveDir,\n                kind: request.kind,\n                pluginData: stash.load(request.pluginData)\n              });\n              if (result != null) {\n                if (typeof result !== \"object\")\n                  throw new Error(`Expected onResolve() callback in plugin ${JSON.stringify(name)} to return an object`);\n                let keys = {};\n                let pluginName = getFlag(result, keys, \"pluginName\", mustBeString);\n                let path3 = getFlag(result, keys, \"path\", mustBeString);\n                let namespace = getFlag(result, keys, \"namespace\", mustBeString);\n                let suffix = getFlag(result, keys, \"suffix\", mustBeString);\n                let external = getFlag(result, keys, \"external\", mustBeBoolean);\n                let sideEffects = getFlag(result, keys, \"sideEffects\", mustBeBoolean);\n                let pluginData = getFlag(result, keys, \"pluginData\", canBeAnything);\n                let errors = getFlag(result, keys, \"errors\", mustBeArray);\n                let warnings = getFlag(result, keys, \"warnings\", mustBeArray);\n                let watchFiles = getFlag(result, keys, \"watchFiles\", mustBeArray);\n                let watchDirs = getFlag(result, keys, \"watchDirs\", mustBeArray);\n                checkForInvalidFlags(result, keys, `from onResolve() callback in plugin ${JSON.stringify(name)}`);\n                response.id = id;\n                if (pluginName != null)\n                  response.pluginName = pluginName;\n                if (path3 != null)\n                  response.path = path3;\n                if (namespace != null)\n                  response.namespace = namespace;\n                if (suffix != null)\n                  response.suffix = suffix;\n                if (external != null)\n                  response.external = external;\n                if (sideEffects != null)\n                  response.sideEffects = sideEffects;\n                if (pluginData != null)\n                  response.pluginData = stash.store(pluginData);\n                if (errors != null)\n                  response.errors = sanitizeMessages(errors, \"errors\", stash, name);\n                if (warnings != null)\n                  response.warnings = sanitizeMessages(warnings, \"warnings\", stash, name);\n                if (watchFiles != null)\n                  response.watchFiles = sanitizeStringArray(watchFiles, \"watchFiles\");\n                if (watchDirs != null)\n                  response.watchDirs = sanitizeStringArray(watchDirs, \"watchDirs\");\n                break;\n              }\n            } catch (e) {\n              return { id, errors: [extractErrorMessageV8(e, streamIn, stash, note && note(), name)] };\n            }\n          }\n          return response;\n        }\n        case \"on-load\": {\n          let response = {}, name = \"\", callback2, note;\n          for (let id of request.ids) {\n            try {\n              ({ name, callback: callback2, note } = onLoadCallbacks[id]);\n              let result = await callback2({\n                path: request.path,\n                namespace: request.namespace,\n                suffix: request.suffix,\n                pluginData: stash.load(request.pluginData)\n              });\n              if (result != null) {\n                if (typeof result !== \"object\")\n                  throw new Error(`Expected onLoad() callback in plugin ${JSON.stringify(name)} to return an object`);\n                let keys = {};\n                let pluginName = getFlag(result, keys, \"pluginName\", mustBeString);\n                let contents = getFlag(result, keys, \"contents\", mustBeStringOrUint8Array);\n                let resolveDir = getFlag(result, keys, \"resolveDir\", mustBeString);\n                let pluginData = getFlag(result, keys, \"pluginData\", canBeAnything);\n                let loader = getFlag(result, keys, \"loader\", mustBeString);\n                let errors = getFlag(result, keys, \"errors\", mustBeArray);\n                let warnings = getFlag(result, keys, \"warnings\", mustBeArray);\n                let watchFiles = getFlag(result, keys, \"watchFiles\", mustBeArray);\n                let watchDirs = getFlag(result, keys, \"watchDirs\", mustBeArray);\n                checkForInvalidFlags(result, keys, `from onLoad() callback in plugin ${JSON.stringify(name)}`);\n                response.id = id;\n                if (pluginName != null)\n                  response.pluginName = pluginName;\n                if (contents instanceof Uint8Array)\n                  response.contents = contents;\n                else if (contents != null)\n                  response.contents = encodeUTF8(contents);\n                if (resolveDir != null)\n                  response.resolveDir = resolveDir;\n                if (pluginData != null)\n                  response.pluginData = stash.store(pluginData);\n                if (loader != null)\n                  response.loader = loader;\n                if (errors != null)\n                  response.errors = sanitizeMessages(errors, \"errors\", stash, name);\n                if (warnings != null)\n                  response.warnings = sanitizeMessages(warnings, \"warnings\", stash, name);\n                if (watchFiles != null)\n                  response.watchFiles = sanitizeStringArray(watchFiles, \"watchFiles\");\n                if (watchDirs != null)\n                  response.watchDirs = sanitizeStringArray(watchDirs, \"watchDirs\");\n                break;\n              }\n            } catch (e) {\n              return { id, errors: [extractErrorMessageV8(e, streamIn, stash, note && note(), name)] };\n            }\n          }\n          return response;\n        }\n        default:\n          throw new Error(`Invalid command: ` + request.command);\n      }\n    };\n    let runOnEndCallbacks = (result, logPluginError, done) => done();\n    if (onEndCallbacks.length > 0) {\n      runOnEndCallbacks = (result, logPluginError, done) => {\n        (async () => {\n          for (const { name, callback: callback2, note } of onEndCallbacks) {\n            try {\n              await callback2(result);\n            } catch (e) {\n              result.errors.push(await new Promise((resolve) => logPluginError(e, name, note && note(), resolve)));\n            }\n          }\n        })().then(done);\n      };\n    }\n    isSetupDone = true;\n    let refCount = 0;\n    return {\n      ok: true,\n      requestPlugins,\n      runOnEndCallbacks,\n      pluginRefs: {\n        ref() {\n          if (++refCount === 1)\n            pluginCallbacks.set(buildKey, callback);\n        },\n        unref() {\n          if (--refCount === 0)\n            pluginCallbacks.delete(buildKey);\n        }\n      }\n    };\n  };\n  let buildServeData = (refs, options, request, key) => {\n    let keys = {};\n    let port = getFlag(options, keys, \"port\", mustBeInteger);\n    let host = getFlag(options, keys, \"host\", mustBeString);\n    let servedir = getFlag(options, keys, \"servedir\", mustBeString);\n    let onRequest = getFlag(options, keys, \"onRequest\", mustBeFunction);\n    let onWait;\n    let wait = new Promise((resolve, reject) => {\n      onWait = (error) => {\n        serveCallbacks.delete(key);\n        if (error !== null)\n          reject(new Error(error));\n        else\n          resolve();\n      };\n    });\n    request.serve = {};\n    checkForInvalidFlags(options, keys, `in serve() call`);\n    if (port !== void 0)\n      request.serve.port = port;\n    if (host !== void 0)\n      request.serve.host = host;\n    if (servedir !== void 0)\n      request.serve.servedir = servedir;\n    serveCallbacks.set(key, {\n      onRequest,\n      onWait\n    });\n    return {\n      wait,\n      stop() {\n        sendRequest(refs, { command: \"serve-stop\", key }, () => {\n        });\n      }\n    };\n  };\n  const buildLogLevelDefault = \"warning\";\n  const transformLogLevelDefault = \"silent\";\n  let buildOrServe = (args) => {\n    let key = nextBuildKey++;\n    const details = createObjectStash();\n    let plugins;\n    let { refs, options, isTTY: isTTY2, callback } = args;\n    if (typeof options === \"object\") {\n      let value = options.plugins;\n      if (value !== void 0) {\n        if (!Array.isArray(value))\n          throw new Error(`\"plugins\" must be an array`);\n        plugins = value;\n      }\n    }\n    let logPluginError = (e, pluginName, note, done) => {\n      let flags = [];\n      try {\n        pushLogFlags(flags, options, {}, isTTY2, buildLogLevelDefault);\n      } catch {\n      }\n      const message = extractErrorMessageV8(e, streamIn, details, note, pluginName);\n      sendRequest(refs, { command: \"error\", flags, error: message }, () => {\n        message.detail = details.load(message.detail);\n        done(message);\n      });\n    };\n    let handleError = (e, pluginName) => {\n      logPluginError(e, pluginName, void 0, (error) => {\n        callback(failureErrorWithLog(\"Build failed\", [error], []), null);\n      });\n    };\n    if (plugins && plugins.length > 0) {\n      if (streamIn.isSync)\n        return handleError(new Error(\"Cannot use plugins in synchronous API calls\"), \"\");\n      handlePlugins(options, plugins, key, details, refs).then(\n        (result) => {\n          if (!result.ok) {\n            handleError(result.error, result.pluginName);\n          } else {\n            try {\n              buildOrServeContinue({\n                ...args,\n                key,\n                details,\n                logPluginError,\n                requestPlugins: result.requestPlugins,\n                runOnEndCallbacks: result.runOnEndCallbacks,\n                pluginRefs: result.pluginRefs\n              });\n            } catch (e) {\n              handleError(e, \"\");\n            }\n          }\n        },\n        (e) => handleError(e, \"\")\n      );\n    } else {\n      try {\n        buildOrServeContinue({\n          ...args,\n          key,\n          details,\n          logPluginError,\n          requestPlugins: null,\n          runOnEndCallbacks: (result, logPluginError2, done) => done(),\n          pluginRefs: null\n        });\n      } catch (e) {\n        handleError(e, \"\");\n      }\n    }\n  };\n  let buildOrServeContinue = ({\n    callName,\n    refs: callerRefs,\n    serveOptions,\n    options,\n    isTTY: isTTY2,\n    defaultWD: defaultWD2,\n    callback,\n    key,\n    details,\n    logPluginError,\n    requestPlugins,\n    runOnEndCallbacks,\n    pluginRefs\n  }) => {\n    const refs = {\n      ref() {\n        if (pluginRefs)\n          pluginRefs.ref();\n        if (callerRefs)\n          callerRefs.ref();\n      },\n      unref() {\n        if (pluginRefs)\n          pluginRefs.unref();\n        if (callerRefs)\n          callerRefs.unref();\n      }\n    };\n    let writeDefault = !streamIn.isWriteUnavailable;\n    let {\n      entries,\n      flags,\n      write,\n      stdinContents,\n      stdinResolveDir,\n      absWorkingDir,\n      incremental,\n      nodePaths,\n      watch,\n      mangleCache\n    } = flagsForBuildOptions(callName, options, isTTY2, buildLogLevelDefault, writeDefault);\n    let request = {\n      command: \"build\",\n      key,\n      entries,\n      flags,\n      write,\n      stdinContents,\n      stdinResolveDir,\n      absWorkingDir: absWorkingDir || defaultWD2,\n      incremental,\n      nodePaths\n    };\n    if (requestPlugins)\n      request.plugins = requestPlugins;\n    if (mangleCache)\n      request.mangleCache = mangleCache;\n    let serve2 = serveOptions && buildServeData(refs, serveOptions, request, key);\n    let rebuild;\n    let stop;\n    let copyResponseToResult = (response, result) => {\n      if (response.outputFiles)\n        result.outputFiles = response.outputFiles.map(convertOutputFiles);\n      if (response.metafile)\n        result.metafile = JSON.parse(response.metafile);\n      if (response.mangleCache)\n        result.mangleCache = response.mangleCache;\n      if (response.writeToStdout !== void 0)\n        console.log(decodeUTF8(response.writeToStdout).replace(/\\n$/, \"\"));\n    };\n    let buildResponseToResult = (response, callback2) => {\n      let result = {\n        errors: replaceDetailsInMessages(response.errors, details),\n        warnings: replaceDetailsInMessages(response.warnings, details)\n      };\n      copyResponseToResult(response, result);\n      runOnEndCallbacks(result, logPluginError, () => {\n        if (result.errors.length > 0) {\n          return callback2(failureErrorWithLog(\"Build failed\", result.errors, result.warnings), null);\n        }\n        if (response.rebuild) {\n          if (!rebuild) {\n            let isDisposed = false;\n            rebuild = () => new Promise((resolve, reject) => {\n              if (isDisposed || closeData)\n                throw new Error(\"Cannot rebuild\");\n              sendRequest(\n                refs,\n                { command: \"rebuild\", key },\n                (error2, response2) => {\n                  if (error2) {\n                    const message = { id: \"\", pluginName: \"\", text: error2, location: null, notes: [], detail: void 0 };\n                    return callback2(failureErrorWithLog(\"Build failed\", [message], []), null);\n                  }\n                  buildResponseToResult(response2, (error3, result3) => {\n                    if (error3)\n                      reject(error3);\n                    else\n                      resolve(result3);\n                  });\n                }\n              );\n            });\n            refs.ref();\n            rebuild.dispose = () => {\n              if (isDisposed)\n                return;\n              isDisposed = true;\n              sendRequest(refs, { command: \"rebuild-dispose\", key }, () => {\n              });\n              refs.unref();\n            };\n          }\n          result.rebuild = rebuild;\n        }\n        if (response.watch) {\n          if (!stop) {\n            let isStopped = false;\n            refs.ref();\n            stop = () => {\n              if (isStopped)\n                return;\n              isStopped = true;\n              watchCallbacks.delete(key);\n              sendRequest(refs, { command: \"watch-stop\", key }, () => {\n              });\n              refs.unref();\n            };\n            if (watch) {\n              watchCallbacks.set(key, (serviceStopError, watchResponse) => {\n                if (serviceStopError) {\n                  if (watch.onRebuild)\n                    watch.onRebuild(serviceStopError, null);\n                  return;\n                }\n                let result2 = {\n                  errors: replaceDetailsInMessages(watchResponse.errors, details),\n                  warnings: replaceDetailsInMessages(watchResponse.warnings, details)\n                };\n                copyResponseToResult(watchResponse, result2);\n                runOnEndCallbacks(result2, logPluginError, () => {\n                  if (result2.errors.length > 0) {\n                    if (watch.onRebuild)\n                      watch.onRebuild(failureErrorWithLog(\"Build failed\", result2.errors, result2.warnings), null);\n                    return;\n                  }\n                  if (watchResponse.rebuildID !== void 0)\n                    result2.rebuild = rebuild;\n                  result2.stop = stop;\n                  if (watch.onRebuild)\n                    watch.onRebuild(null, result2);\n                });\n              });\n            }\n          }\n          result.stop = stop;\n        }\n        callback2(null, result);\n      });\n    };\n    if (write && streamIn.isWriteUnavailable)\n      throw new Error(`The \"write\" option is unavailable in this environment`);\n    if (incremental && streamIn.isSync)\n      throw new Error(`Cannot use \"incremental\" with a synchronous build`);\n    if (watch && streamIn.isSync)\n      throw new Error(`Cannot use \"watch\" with a synchronous build`);\n    sendRequest(refs, request, (error, response) => {\n      if (error)\n        return callback(new Error(error), null);\n      if (serve2) {\n        let serveResponse = response;\n        let isStopped = false;\n        refs.ref();\n        let result = {\n          port: serveResponse.port,\n          host: serveResponse.host,\n          wait: serve2.wait,\n          stop() {\n            if (isStopped)\n              return;\n            isStopped = true;\n            serve2.stop();\n            refs.unref();\n          }\n        };\n        refs.ref();\n        serve2.wait.then(refs.unref, refs.unref);\n        return callback(null, result);\n      }\n      return buildResponseToResult(response, callback);\n    });\n  };\n  let transform2 = ({ callName, refs, input, options, isTTY: isTTY2, fs: fs3, callback }) => {\n    const details = createObjectStash();\n    let start = (inputPath) => {\n      try {\n        if (typeof input !== \"string\" && !(input instanceof Uint8Array))\n          throw new Error('The input to \"transform\" must be a string or a Uint8Array');\n        let {\n          flags,\n          mangleCache\n        } = flagsForTransformOptions(callName, options, isTTY2, transformLogLevelDefault);\n        let request = {\n          command: \"transform\",\n          flags,\n          inputFS: inputPath !== null,\n          input: inputPath !== null ? encodeUTF8(inputPath) : typeof input === \"string\" ? encodeUTF8(input) : input\n        };\n        if (mangleCache)\n          request.mangleCache = mangleCache;\n        sendRequest(refs, request, (error, response) => {\n          if (error)\n            return callback(new Error(error), null);\n          let errors = replaceDetailsInMessages(response.errors, details);\n          let warnings = replaceDetailsInMessages(response.warnings, details);\n          let outstanding = 1;\n          let next = () => {\n            if (--outstanding === 0) {\n              let result = { warnings, code: response.code, map: response.map };\n              if (response.mangleCache)\n                result.mangleCache = response == null ? void 0 : response.mangleCache;\n              callback(null, result);\n            }\n          };\n          if (errors.length > 0)\n            return callback(failureErrorWithLog(\"Transform failed\", errors, warnings), null);\n          if (response.codeFS) {\n            outstanding++;\n            fs3.readFile(response.code, (err, contents) => {\n              if (err !== null) {\n                callback(err, null);\n              } else {\n                response.code = contents;\n                next();\n              }\n            });\n          }\n          if (response.mapFS) {\n            outstanding++;\n            fs3.readFile(response.map, (err, contents) => {\n              if (err !== null) {\n                callback(err, null);\n              } else {\n                response.map = contents;\n                next();\n              }\n            });\n          }\n          next();\n        });\n      } catch (e) {\n        let flags = [];\n        try {\n          pushLogFlags(flags, options, {}, isTTY2, transformLogLevelDefault);\n        } catch {\n        }\n        const error = extractErrorMessageV8(e, streamIn, details, void 0, \"\");\n        sendRequest(refs, { command: \"error\", flags, error }, () => {\n          error.detail = details.load(error.detail);\n          callback(failureErrorWithLog(\"Transform failed\", [error], []), null);\n        });\n      }\n    };\n    if ((typeof input === \"string\" || input instanceof Uint8Array) && input.length > 1024 * 1024) {\n      let next = start;\n      start = () => fs3.writeFile(input, next);\n    }\n    start(null);\n  };\n  let formatMessages2 = ({ callName, refs, messages, options, callback }) => {\n    let result = sanitizeMessages(messages, \"messages\", null, \"\");\n    if (!options)\n      throw new Error(`Missing second argument in ${callName}() call`);\n    let keys = {};\n    let kind = getFlag(options, keys, \"kind\", mustBeString);\n    let color = getFlag(options, keys, \"color\", mustBeBoolean);\n    let terminalWidth = getFlag(options, keys, \"terminalWidth\", mustBeInteger);\n    checkForInvalidFlags(options, keys, `in ${callName}() call`);\n    if (kind === void 0)\n      throw new Error(`Missing \"kind\" in ${callName}() call`);\n    if (kind !== \"error\" && kind !== \"warning\")\n      throw new Error(`Expected \"kind\" to be \"error\" or \"warning\" in ${callName}() call`);\n    let request = {\n      command: \"format-msgs\",\n      messages: result,\n      isWarning: kind === \"warning\"\n    };\n    if (color !== void 0)\n      request.color = color;\n    if (terminalWidth !== void 0)\n      request.terminalWidth = terminalWidth;\n    sendRequest(refs, request, (error, response) => {\n      if (error)\n        return callback(new Error(error), null);\n      callback(null, response.messages);\n    });\n  };\n  let analyzeMetafile2 = ({ callName, refs, metafile, options, callback }) => {\n    if (options === void 0)\n      options = {};\n    let keys = {};\n    let color = getFlag(options, keys, \"color\", mustBeBoolean);\n    let verbose = getFlag(options, keys, \"verbose\", mustBeBoolean);\n    checkForInvalidFlags(options, keys, `in ${callName}() call`);\n    let request = {\n      command: \"analyze-metafile\",\n      metafile\n    };\n    if (color !== void 0)\n      request.color = color;\n    if (verbose !== void 0)\n      request.verbose = verbose;\n    sendRequest(refs, request, (error, response) => {\n      if (error)\n        return callback(new Error(error), null);\n      callback(null, response.result);\n    });\n  };\n  return {\n    readFromStdout,\n    afterClose,\n    service: {\n      buildOrServe,\n      transform: transform2,\n      formatMessages: formatMessages2,\n      analyzeMetafile: analyzeMetafile2\n    }\n  };\n}\nfunction createObjectStash() {\n  const map = /* @__PURE__ */ new Map();\n  let nextID = 0;\n  return {\n    load(id) {\n      return map.get(id);\n    },\n    store(value) {\n      if (value === void 0)\n        return -1;\n      const id = nextID++;\n      map.set(id, value);\n      return id;\n    }\n  };\n}\nfunction extractCallerV8(e, streamIn, ident) {\n  let note;\n  let tried = false;\n  return () => {\n    if (tried)\n      return note;\n    tried = true;\n    try {\n      let lines = (e.stack + \"\").split(\"\\n\");\n      lines.splice(1, 1);\n      let location = parseStackLinesV8(streamIn, lines, ident);\n      if (location) {\n        note = { text: e.message, location };\n        return note;\n      }\n    } catch {\n    }\n  };\n}\nfunction extractErrorMessageV8(e, streamIn, stash, note, pluginName) {\n  let text = \"Internal error\";\n  let location = null;\n  try {\n    text = (e && e.message || e) + \"\";\n  } catch {\n  }\n  try {\n    location = parseStackLinesV8(streamIn, (e.stack + \"\").split(\"\\n\"), \"\");\n  } catch {\n  }\n  return { id: \"\", pluginName, text, location, notes: note ? [note] : [], detail: stash ? stash.store(e) : -1 };\n}\nfunction parseStackLinesV8(streamIn, lines, ident) {\n  let at = \"    at \";\n  if (streamIn.readFileSync && !lines[0].startsWith(at) && lines[1].startsWith(at)) {\n    for (let i = 1; i < lines.length; i++) {\n      let line = lines[i];\n      if (!line.startsWith(at))\n        continue;\n      line = line.slice(at.length);\n      while (true) {\n        let match = /^(?:new |async )?\\S+ \\((.*)\\)$/.exec(line);\n        if (match) {\n          line = match[1];\n          continue;\n        }\n        match = /^eval at \\S+ \\((.*)\\)(?:, \\S+:\\d+:\\d+)?$/.exec(line);\n        if (match) {\n          line = match[1];\n          continue;\n        }\n        match = /^(\\S+):(\\d+):(\\d+)$/.exec(line);\n        if (match) {\n          let contents;\n          try {\n            contents = streamIn.readFileSync(match[1], \"utf8\");\n          } catch {\n            break;\n          }\n          let lineText = contents.split(/\\r\\n|\\r|\\n|\\u2028|\\u2029/)[+match[2] - 1] || \"\";\n          let column = +match[3] - 1;\n          let length = lineText.slice(column, column + ident.length) === ident ? ident.length : 0;\n          return {\n            file: match[1],\n            namespace: \"file\",\n            line: +match[2],\n            column: encodeUTF8(lineText.slice(0, column)).length,\n            length: encodeUTF8(lineText.slice(column, column + length)).length,\n            lineText: lineText + \"\\n\" + lines.slice(1).join(\"\\n\"),\n            suggestion: \"\"\n          };\n        }\n        break;\n      }\n    }\n  }\n  return null;\n}\nfunction failureErrorWithLog(text, errors, warnings) {\n  let limit = 5;\n  let summary = errors.length < 1 ? \"\" : ` with ${errors.length} error${errors.length < 2 ? \"\" : \"s\"}:` + errors.slice(0, limit + 1).map((e, i) => {\n    if (i === limit)\n      return \"\\n...\";\n    if (!e.location)\n      return `\nerror: ${e.text}`;\n    let { file, line, column } = e.location;\n    let pluginText = e.pluginName ? `[plugin: ${e.pluginName}] ` : \"\";\n    return `\n${file}:${line}:${column}: ERROR: ${pluginText}${e.text}`;\n  }).join(\"\");\n  let error = new Error(`${text}${summary}`);\n  error.errors = errors;\n  error.warnings = warnings;\n  return error;\n}\nfunction replaceDetailsInMessages(messages, stash) {\n  for (const message of messages) {\n    message.detail = stash.load(message.detail);\n  }\n  return messages;\n}\nfunction sanitizeLocation(location, where) {\n  if (location == null)\n    return null;\n  let keys = {};\n  let file = getFlag(location, keys, \"file\", mustBeString);\n  let namespace = getFlag(location, keys, \"namespace\", mustBeString);\n  let line = getFlag(location, keys, \"line\", mustBeInteger);\n  let column = getFlag(location, keys, \"column\", mustBeInteger);\n  let length = getFlag(location, keys, \"length\", mustBeInteger);\n  let lineText = getFlag(location, keys, \"lineText\", mustBeString);\n  let suggestion = getFlag(location, keys, \"suggestion\", mustBeString);\n  checkForInvalidFlags(location, keys, where);\n  return {\n    file: file || \"\",\n    namespace: namespace || \"\",\n    line: line || 0,\n    column: column || 0,\n    length: length || 0,\n    lineText: lineText || \"\",\n    suggestion: suggestion || \"\"\n  };\n}\nfunction sanitizeMessages(messages, property, stash, fallbackPluginName) {\n  let messagesClone = [];\n  let index = 0;\n  for (const message of messages) {\n    let keys = {};\n    let id = getFlag(message, keys, \"id\", mustBeString);\n    let pluginName = getFlag(message, keys, \"pluginName\", mustBeString);\n    let text = getFlag(message, keys, \"text\", mustBeString);\n    let location = getFlag(message, keys, \"location\", mustBeObjectOrNull);\n    let notes = getFlag(message, keys, \"notes\", mustBeArray);\n    let detail = getFlag(message, keys, \"detail\", canBeAnything);\n    let where = `in element ${index} of \"${property}\"`;\n    checkForInvalidFlags(message, keys, where);\n    let notesClone = [];\n    if (notes) {\n      for (const note of notes) {\n        let noteKeys = {};\n        let noteText = getFlag(note, noteKeys, \"text\", mustBeString);\n        let noteLocation = getFlag(note, noteKeys, \"location\", mustBeObjectOrNull);\n        checkForInvalidFlags(note, noteKeys, where);\n        notesClone.push({\n          text: noteText || \"\",\n          location: sanitizeLocation(noteLocation, where)\n        });\n      }\n    }\n    messagesClone.push({\n      id: id || \"\",\n      pluginName: pluginName || fallbackPluginName,\n      text: text || \"\",\n      location: sanitizeLocation(location, where),\n      notes: notesClone,\n      detail: stash ? stash.store(detail) : -1\n    });\n    index++;\n  }\n  return messagesClone;\n}\nfunction sanitizeStringArray(values, property) {\n  const result = [];\n  for (const value of values) {\n    if (typeof value !== \"string\")\n      throw new Error(`${JSON.stringify(property)} must be an array of strings`);\n    result.push(value);\n  }\n  return result;\n}\nfunction convertOutputFiles({ path: path3, contents }) {\n  let text = null;\n  return {\n    path: path3,\n    contents,\n    get text() {\n      const binary = this.contents;\n      if (text === null || binary !== contents) {\n        contents = binary;\n        text = decodeUTF8(binary);\n      }\n      return text;\n    }\n  };\n}\n\n// lib/npm/node-platform.ts\nvar fs = require(\"fs\");\nvar os = require(\"os\");\nvar path = require(\"path\");\nvar ESBUILD_BINARY_PATH = process.env.ESBUILD_BINARY_PATH || ESBUILD_BINARY_PATH;\nvar knownWindowsPackages = {\n  \"win32 arm64 LE\": \"esbuild-windows-arm64\",\n  \"win32 ia32 LE\": \"esbuild-windows-32\",\n  \"win32 x64 LE\": \"esbuild-windows-64\"\n};\nvar knownUnixlikePackages = {\n  \"android arm64 LE\": \"esbuild-android-arm64\",\n  \"darwin arm64 LE\": \"esbuild-darwin-arm64\",\n  \"darwin x64 LE\": \"esbuild-darwin-64\",\n  \"freebsd arm64 LE\": \"esbuild-freebsd-arm64\",\n  \"freebsd x64 LE\": \"esbuild-freebsd-64\",\n  \"linux arm LE\": \"esbuild-linux-arm\",\n  \"linux arm64 LE\": \"esbuild-linux-arm64\",\n  \"linux ia32 LE\": \"esbuild-linux-32\",\n  \"linux mips64el LE\": \"esbuild-linux-mips64le\",\n  \"linux ppc64 LE\": \"esbuild-linux-ppc64le\",\n  \"linux riscv64 LE\": \"esbuild-linux-riscv64\",\n  \"linux s390x BE\": \"esbuild-linux-s390x\",\n  \"linux x64 LE\": \"esbuild-linux-64\",\n  \"linux loong64 LE\": \"@esbuild/linux-loong64\",\n  \"netbsd x64 LE\": \"esbuild-netbsd-64\",\n  \"openbsd x64 LE\": \"esbuild-openbsd-64\",\n  \"sunos x64 LE\": \"esbuild-sunos-64\"\n};\nvar knownWebAssemblyFallbackPackages = {\n  \"android x64 LE\": \"esbuild-android-64\"\n};\nfunction pkgAndSubpathForCurrentPlatform() {\n  let pkg;\n  let subpath;\n  let isWASM = false;\n  let platformKey = `${process.platform} ${os.arch()} ${os.endianness()}`;\n  if (platformKey in knownWindowsPackages) {\n    pkg = knownWindowsPackages[platformKey];\n    subpath = \"esbuild.exe\";\n  } else if (platformKey in knownUnixlikePackages) {\n    pkg = knownUnixlikePackages[platformKey];\n    subpath = \"bin/esbuild\";\n  } else if (platformKey in knownWebAssemblyFallbackPackages) {\n    pkg = knownWebAssemblyFallbackPackages[platformKey];\n    subpath = \"bin/esbuild\";\n    isWASM = true;\n  } else {\n    throw new Error(`Unsupported platform: ${platformKey}`);\n  }\n  return { pkg, subpath, isWASM };\n}\nfunction pkgForSomeOtherPlatform() {\n  const libMainJS = require.resolve(\"esbuild\");\n  const nodeModulesDirectory = path.dirname(path.dirname(path.dirname(libMainJS)));\n  if (path.basename(nodeModulesDirectory) === \"node_modules\") {\n    for (const unixKey in knownUnixlikePackages) {\n      try {\n        const pkg = knownUnixlikePackages[unixKey];\n        if (fs.existsSync(path.join(nodeModulesDirectory, pkg)))\n          return pkg;\n      } catch {\n      }\n    }\n    for (const windowsKey in knownWindowsPackages) {\n      try {\n        const pkg = knownWindowsPackages[windowsKey];\n        if (fs.existsSync(path.join(nodeModulesDirectory, pkg)))\n          return pkg;\n      } catch {\n      }\n    }\n  }\n  return null;\n}\nfunction downloadedBinPath(pkg, subpath) {\n  const esbuildLibDir = path.dirname(require.resolve(\"esbuild\"));\n  return path.join(esbuildLibDir, `downloaded-${pkg}-${path.basename(subpath)}`);\n}\nfunction generateBinPath() {\n  if (ESBUILD_BINARY_PATH) {\n    return { binPath: ESBUILD_BINARY_PATH, isWASM: false };\n  }\n  const { pkg, subpath, isWASM } = pkgAndSubpathForCurrentPlatform();\n  let binPath;\n  try {\n    binPath = require.resolve(`${pkg}/${subpath}`);\n  } catch (e) {\n    binPath = downloadedBinPath(pkg, subpath);\n    if (!fs.existsSync(binPath)) {\n      try {\n        require.resolve(pkg);\n      } catch {\n        const otherPkg = pkgForSomeOtherPlatform();\n        if (otherPkg) {\n          throw new Error(`\nYou installed esbuild on another platform than the one you're currently using.\nThis won't work because esbuild is written with native code and needs to\ninstall a platform-specific binary executable.\n\nSpecifically the \"${otherPkg}\" package is present but this platform\nneeds the \"${pkg}\" package instead. People often get into this\nsituation by installing esbuild on Windows or macOS and copying \"node_modules\"\ninto a Docker image that runs Linux, or by copying \"node_modules\" between\nWindows and WSL environments.\n\nIf you are installing with npm, you can try not copying the \"node_modules\"\ndirectory when you copy the files over, and running \"npm ci\" or \"npm install\"\non the destination platform after the copy. Or you could consider using yarn\ninstead which has built-in support for installing a package on multiple\nplatforms simultaneously.\n\nIf you are installing with yarn, you can try listing both this platform and the\nother platform in your \".yarnrc.yml\" file using the \"supportedArchitectures\"\nfeature: https://yarnpkg.com/configuration/yarnrc/#supportedArchitectures\nKeep in mind that this means multiple copies of esbuild will be present.\n\nAnother alternative is to use the \"esbuild-wasm\" package instead, which works\nthe same way on all platforms. But it comes with a heavy performance cost and\ncan sometimes be 10x slower than the \"esbuild\" package, so you may also not\nwant to do that.\n`);\n        }\n        throw new Error(`The package \"${pkg}\" could not be found, and is needed by esbuild.\n\nIf you are installing esbuild with npm, make sure that you don't specify the\n\"--no-optional\" flag. The \"optionalDependencies\" package.json feature is used\nby esbuild to install the correct binary executable for your current platform.`);\n      }\n      throw e;\n    }\n  }\n  let isYarnPnP = false;\n  try {\n    require(\"pnpapi\");\n    isYarnPnP = true;\n  } catch (e) {\n  }\n  if (isYarnPnP) {\n    const esbuildLibDir = path.dirname(require.resolve(\"esbuild\"));\n    const binTargetPath = path.join(esbuildLibDir, `pnpapi-${pkg}-${path.basename(subpath)}`);\n    if (!fs.existsSync(binTargetPath)) {\n      fs.copyFileSync(binPath, binTargetPath);\n      fs.chmodSync(binTargetPath, 493);\n    }\n    return { binPath: binTargetPath, isWASM };\n  }\n  return { binPath, isWASM };\n}\n\n// lib/npm/node.ts\nvar child_process = require(\"child_process\");\nvar crypto = require(\"crypto\");\nvar path2 = require(\"path\");\nvar fs2 = require(\"fs\");\nvar os2 = require(\"os\");\nvar tty = require(\"tty\");\nvar worker_threads;\nif (process.env.ESBUILD_WORKER_THREADS !== \"0\") {\n  try {\n    worker_threads = require(\"worker_threads\");\n  } catch {\n  }\n  let [major, minor] = process.versions.node.split(\".\");\n  if (+major < 12 || +major === 12 && +minor < 17 || +major === 13 && +minor < 13) {\n    worker_threads = void 0;\n  }\n}\nvar _a;\nvar isInternalWorkerThread = ((_a = worker_threads == null ? void 0 : worker_threads.workerData) == null ? void 0 : _a.esbuildVersion) === \"0.15.5\";\nvar esbuildCommandAndArgs = () => {\n  if ((!ESBUILD_BINARY_PATH || false) && (path2.basename(__filename) !== \"main.js\" || path2.basename(__dirname) !== \"lib\")) {\n    throw new Error(\n      `The esbuild JavaScript API cannot be bundled. Please mark the \"esbuild\" package as external so it's not included in the bundle.\n\nMore information: The file containing the code for esbuild's JavaScript API (${__filename}) does not appear to be inside the esbuild package on the file system, which usually means that the esbuild package was bundled into another file. This is problematic because the API needs to run a binary executable inside the esbuild package which is located using a relative path from the API code to the executable. If the esbuild package is bundled, the relative path will be incorrect and the executable won't be found.`\n    );\n  }\n  if (false) {\n    return [\"node\", [path2.join(__dirname, \"..\", \"bin\", \"esbuild\")]];\n  }\n  const { binPath, isWASM } = generateBinPath();\n  if (isWASM) {\n    return [\"node\", [binPath]];\n  } else {\n    return [binPath, []];\n  }\n};\nvar isTTY = () => tty.isatty(2);\nvar fsSync = {\n  readFile(tempFile, callback) {\n    try {\n      let contents = fs2.readFileSync(tempFile, \"utf8\");\n      try {\n        fs2.unlinkSync(tempFile);\n      } catch {\n      }\n      callback(null, contents);\n    } catch (err) {\n      callback(err, null);\n    }\n  },\n  writeFile(contents, callback) {\n    try {\n      let tempFile = randomFileName();\n      fs2.writeFileSync(tempFile, contents);\n      callback(tempFile);\n    } catch {\n      callback(null);\n    }\n  }\n};\nvar fsAsync = {\n  readFile(tempFile, callback) {\n    try {\n      fs2.readFile(tempFile, \"utf8\", (err, contents) => {\n        try {\n          fs2.unlink(tempFile, () => callback(err, contents));\n        } catch {\n          callback(err, contents);\n        }\n      });\n    } catch (err) {\n      callback(err, null);\n    }\n  },\n  writeFile(contents, callback) {\n    try {\n      let tempFile = randomFileName();\n      fs2.writeFile(tempFile, contents, (err) => err !== null ? callback(null) : callback(tempFile));\n    } catch {\n      callback(null);\n    }\n  }\n};\nvar version = \"0.15.5\";\nvar build = (options) => ensureServiceIsRunning().build(options);\nvar serve = (serveOptions, buildOptions) => ensureServiceIsRunning().serve(serveOptions, buildOptions);\nvar transform = (input, options) => ensureServiceIsRunning().transform(input, options);\nvar formatMessages = (messages, options) => ensureServiceIsRunning().formatMessages(messages, options);\nvar analyzeMetafile = (messages, options) => ensureServiceIsRunning().analyzeMetafile(messages, options);\nvar buildSync = (options) => {\n  if (worker_threads && !isInternalWorkerThread) {\n    if (!workerThreadService)\n      workerThreadService = startWorkerThreadService(worker_threads);\n    return workerThreadService.buildSync(options);\n  }\n  let result;\n  runServiceSync((service) => service.buildOrServe({\n    callName: \"buildSync\",\n    refs: null,\n    serveOptions: null,\n    options,\n    isTTY: isTTY(),\n    defaultWD,\n    callback: (err, res) => {\n      if (err)\n        throw err;\n      result = res;\n    }\n  }));\n  return result;\n};\nvar transformSync = (input, options) => {\n  if (worker_threads && !isInternalWorkerThread) {\n    if (!workerThreadService)\n      workerThreadService = startWorkerThreadService(worker_threads);\n    return workerThreadService.transformSync(input, options);\n  }\n  let result;\n  runServiceSync((service) => service.transform({\n    callName: \"transformSync\",\n    refs: null,\n    input,\n    options: options || {},\n    isTTY: isTTY(),\n    fs: fsSync,\n    callback: (err, res) => {\n      if (err)\n        throw err;\n      result = res;\n    }\n  }));\n  return result;\n};\nvar formatMessagesSync = (messages, options) => {\n  if (worker_threads && !isInternalWorkerThread) {\n    if (!workerThreadService)\n      workerThreadService = startWorkerThreadService(worker_threads);\n    return workerThreadService.formatMessagesSync(messages, options);\n  }\n  let result;\n  runServiceSync((service) => service.formatMessages({\n    callName: \"formatMessagesSync\",\n    refs: null,\n    messages,\n    options,\n    callback: (err, res) => {\n      if (err)\n        throw err;\n      result = res;\n    }\n  }));\n  return result;\n};\nvar analyzeMetafileSync = (metafile, options) => {\n  if (worker_threads && !isInternalWorkerThread) {\n    if (!workerThreadService)\n      workerThreadService = startWorkerThreadService(worker_threads);\n    return workerThreadService.analyzeMetafileSync(metafile, options);\n  }\n  let result;\n  runServiceSync((service) => service.analyzeMetafile({\n    callName: \"analyzeMetafileSync\",\n    refs: null,\n    metafile: typeof metafile === \"string\" ? metafile : JSON.stringify(metafile),\n    options,\n    callback: (err, res) => {\n      if (err)\n        throw err;\n      result = res;\n    }\n  }));\n  return result;\n};\nvar initializeWasCalled = false;\nvar initialize = (options) => {\n  options = validateInitializeOptions(options || {});\n  if (options.wasmURL)\n    throw new Error(`The \"wasmURL\" option only works in the browser`);\n  if (options.wasmModule)\n    throw new Error(`The \"wasmModule\" option only works in the browser`);\n  if (options.worker)\n    throw new Error(`The \"worker\" option only works in the browser`);\n  if (initializeWasCalled)\n    throw new Error('Cannot call \"initialize\" more than once');\n  ensureServiceIsRunning();\n  initializeWasCalled = true;\n  return Promise.resolve();\n};\nvar defaultWD = process.cwd();\nvar longLivedService;\nvar ensureServiceIsRunning = () => {\n  if (longLivedService)\n    return longLivedService;\n  let [command, args] = esbuildCommandAndArgs();\n  let child = child_process.spawn(command, args.concat(`--service=${\"0.15.5\"}`, \"--ping\"), {\n    windowsHide: true,\n    stdio: [\"pipe\", \"pipe\", \"inherit\"],\n    cwd: defaultWD\n  });\n  let { readFromStdout, afterClose, service } = createChannel({\n    writeToStdin(bytes) {\n      child.stdin.write(bytes, (err) => {\n        if (err)\n          afterClose(err);\n      });\n    },\n    readFileSync: fs2.readFileSync,\n    isSync: false,\n    isWriteUnavailable: false,\n    esbuild: node_exports\n  });\n  child.stdin.on(\"error\", afterClose);\n  child.on(\"error\", afterClose);\n  const stdin = child.stdin;\n  const stdout = child.stdout;\n  stdout.on(\"data\", readFromStdout);\n  stdout.on(\"end\", afterClose);\n  let refCount = 0;\n  child.unref();\n  if (stdin.unref) {\n    stdin.unref();\n  }\n  if (stdout.unref) {\n    stdout.unref();\n  }\n  const refs = {\n    ref() {\n      if (++refCount === 1)\n        child.ref();\n    },\n    unref() {\n      if (--refCount === 0)\n        child.unref();\n    }\n  };\n  longLivedService = {\n    build: (options) => {\n      return new Promise((resolve, reject) => {\n        service.buildOrServe({\n          callName: \"build\",\n          refs,\n          serveOptions: null,\n          options,\n          isTTY: isTTY(),\n          defaultWD,\n          callback: (err, res) => err ? reject(err) : resolve(res)\n        });\n      });\n    },\n    serve: (serveOptions, buildOptions) => {\n      if (serveOptions === null || typeof serveOptions !== \"object\")\n        throw new Error(\"The first argument must be an object\");\n      return new Promise((resolve, reject) => service.buildOrServe({\n        callName: \"serve\",\n        refs,\n        serveOptions,\n        options: buildOptions,\n        isTTY: isTTY(),\n        defaultWD,\n        callback: (err, res) => err ? reject(err) : resolve(res)\n      }));\n    },\n    transform: (input, options) => {\n      return new Promise((resolve, reject) => service.transform({\n        callName: \"transform\",\n        refs,\n        input,\n        options: options || {},\n        isTTY: isTTY(),\n        fs: fsAsync,\n        callback: (err, res) => err ? reject(err) : resolve(res)\n      }));\n    },\n    formatMessages: (messages, options) => {\n      return new Promise((resolve, reject) => service.formatMessages({\n        callName: \"formatMessages\",\n        refs,\n        messages,\n        options,\n        callback: (err, res) => err ? reject(err) : resolve(res)\n      }));\n    },\n    analyzeMetafile: (metafile, options) => {\n      return new Promise((resolve, reject) => service.analyzeMetafile({\n        callName: \"analyzeMetafile\",\n        refs,\n        metafile: typeof metafile === \"string\" ? metafile : JSON.stringify(metafile),\n        options,\n        callback: (err, res) => err ? reject(err) : resolve(res)\n      }));\n    }\n  };\n  return longLivedService;\n};\nvar runServiceSync = (callback) => {\n  let [command, args] = esbuildCommandAndArgs();\n  let stdin = new Uint8Array();\n  let { readFromStdout, afterClose, service } = createChannel({\n    writeToStdin(bytes) {\n      if (stdin.length !== 0)\n        throw new Error(\"Must run at most one command\");\n      stdin = bytes;\n    },\n    isSync: true,\n    isWriteUnavailable: false,\n    esbuild: node_exports\n  });\n  callback(service);\n  let stdout = child_process.execFileSync(command, args.concat(`--service=${\"0.15.5\"}`), {\n    cwd: defaultWD,\n    windowsHide: true,\n    input: stdin,\n    maxBuffer: +process.env.ESBUILD_MAX_BUFFER || 16 * 1024 * 1024\n  });\n  readFromStdout(stdout);\n  afterClose(null);\n};\nvar randomFileName = () => {\n  return path2.join(os2.tmpdir(), `esbuild-${crypto.randomBytes(32).toString(\"hex\")}`);\n};\nvar workerThreadService = null;\nvar startWorkerThreadService = (worker_threads2) => {\n  let { port1: mainPort, port2: workerPort } = new worker_threads2.MessageChannel();\n  let worker = new worker_threads2.Worker(__filename, {\n    workerData: { workerPort, defaultWD, esbuildVersion: \"0.15.5\" },\n    transferList: [workerPort],\n    execArgv: []\n  });\n  let nextID = 0;\n  let fakeBuildError = (text) => {\n    let error = new Error(`Build failed with 1 error:\nerror: ${text}`);\n    let errors = [{ id: \"\", pluginName: \"\", text, location: null, notes: [], detail: void 0 }];\n    error.errors = errors;\n    error.warnings = [];\n    return error;\n  };\n  let validateBuildSyncOptions = (options) => {\n    if (!options)\n      return;\n    let plugins = options.plugins;\n    let incremental = options.incremental;\n    let watch = options.watch;\n    if (plugins && plugins.length > 0)\n      throw fakeBuildError(`Cannot use plugins in synchronous API calls`);\n    if (incremental)\n      throw fakeBuildError(`Cannot use \"incremental\" with a synchronous build`);\n    if (watch)\n      throw fakeBuildError(`Cannot use \"watch\" with a synchronous build`);\n  };\n  let applyProperties = (object, properties) => {\n    for (let key in properties) {\n      object[key] = properties[key];\n    }\n  };\n  let runCallSync = (command, args) => {\n    let id = nextID++;\n    let sharedBuffer = new SharedArrayBuffer(8);\n    let sharedBufferView = new Int32Array(sharedBuffer);\n    let msg = { sharedBuffer, id, command, args };\n    worker.postMessage(msg);\n    let status = Atomics.wait(sharedBufferView, 0, 0);\n    if (status !== \"ok\" && status !== \"not-equal\")\n      throw new Error(\"Internal error: Atomics.wait() failed: \" + status);\n    let { message: { id: id2, resolve, reject, properties } } = worker_threads2.receiveMessageOnPort(mainPort);\n    if (id !== id2)\n      throw new Error(`Internal error: Expected id ${id} but got id ${id2}`);\n    if (reject) {\n      applyProperties(reject, properties);\n      throw reject;\n    }\n    return resolve;\n  };\n  worker.unref();\n  return {\n    buildSync(options) {\n      validateBuildSyncOptions(options);\n      return runCallSync(\"build\", [options]);\n    },\n    transformSync(input, options) {\n      return runCallSync(\"transform\", [input, options]);\n    },\n    formatMessagesSync(messages, options) {\n      return runCallSync(\"formatMessages\", [messages, options]);\n    },\n    analyzeMetafileSync(metafile, options) {\n      return runCallSync(\"analyzeMetafile\", [metafile, options]);\n    }\n  };\n};\nvar startSyncServiceWorker = () => {\n  let workerPort = worker_threads.workerData.workerPort;\n  let parentPort = worker_threads.parentPort;\n  let extractProperties = (object) => {\n    let properties = {};\n    if (object && typeof object === \"object\") {\n      for (let key in object) {\n        properties[key] = object[key];\n      }\n    }\n    return properties;\n  };\n  try {\n    let service = ensureServiceIsRunning();\n    defaultWD = worker_threads.workerData.defaultWD;\n    parentPort.on(\"message\", (msg) => {\n      (async () => {\n        let { sharedBuffer, id, command, args } = msg;\n        let sharedBufferView = new Int32Array(sharedBuffer);\n        try {\n          switch (command) {\n            case \"build\":\n              workerPort.postMessage({ id, resolve: await service.build(args[0]) });\n              break;\n            case \"transform\":\n              workerPort.postMessage({ id, resolve: await service.transform(args[0], args[1]) });\n              break;\n            case \"formatMessages\":\n              workerPort.postMessage({ id, resolve: await service.formatMessages(args[0], args[1]) });\n              break;\n            case \"analyzeMetafile\":\n              workerPort.postMessage({ id, resolve: await service.analyzeMetafile(args[0], args[1]) });\n              break;\n            default:\n              throw new Error(`Invalid command: ${command}`);\n          }\n        } catch (reject) {\n          workerPort.postMessage({ id, reject, properties: extractProperties(reject) });\n        }\n        Atomics.add(sharedBufferView, 0, 1);\n        Atomics.notify(sharedBufferView, 0, Infinity);\n      })();\n    });\n  } catch (reject) {\n    parentPort.on(\"message\", (msg) => {\n      let { sharedBuffer, id } = msg;\n      let sharedBufferView = new Int32Array(sharedBuffer);\n      workerPort.postMessage({ id, reject, properties: extractProperties(reject) });\n      Atomics.add(sharedBufferView, 0, 1);\n      Atomics.notify(sharedBufferView, 0, Infinity);\n    });\n  }\n};\nif (isInternalWorkerThread) {\n  startSyncServiceWorker();\n}\nvar node_default = node_exports;\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  analyzeMetafile,\n  analyzeMetafileSync,\n  build,\n  buildSync,\n  formatMessages,\n  formatMessagesSync,\n  initialize,\n  serve,\n  transform,\n  transformSync,\n  version\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}